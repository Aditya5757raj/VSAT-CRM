<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VSAT CRM - Dashboard</title>
    <link rel="stylesheet" href="../css/dashboard.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- Select2 JS -->
    <script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>
</head>

<body>
<!-- Page Transition -->
    <div class="page-transition" id="pageTransition"></div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>
    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>
    <div class="dashboard">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" style="width: 250px; background-color: #f4f4f4; height: 100vh;">
            <div class="sidebar-header" style="padding: 20px; overflow: visible;">
                <div class="logo" style="display: flex; align-items: center; gap: 16px; max-width: 100%;">
                    <!-- Fully Visible Logo Image -->
                    <img src="../assets/logo1.png" alt="VSAT Logo"
                        style="height: 80px; width: 80px; object-fit: contain; border-radius: 8px; background-color: white; padding: 6px; box-shadow: 0 0 8px rgba(0,0,0,0.1); flex-shrink: 0;">

                    <div class="logo-text" style="line-height: 1.2; overflow: hidden;">
                        <h1 style="font-size: 20px; margin: 0; color: #0d47a1;">VSAT CRM</h1>
                        <p style="font-size: 13px; margin: 4px 0 0; color: #444;">Customer Dashboard</p>
                    </div>
                </div>
            </div>

            <!-- Updated Navigation Menu -->
            <nav class="sidebar-nav" style="padding: 0 20px;">
                <div class="nav-section">
                    <p class="nav-title" style="margin: 10px 0; font-weight: bold;">Main Menu</p>
                    <ul class="nav-list" style="list-style: none; padding: 0;">
                        <li>
                            <button class="nav-item active" data-section="overview">
                                <i class="fas fa-th-large"></i> Dashboard
                            </button>
                        </li>
                        <!-- Call Registration with Job History as submenu -->
                        <li class="has-submenu">
                            <button class="nav-item submenu-trigger">
                                <i class="fas fa-phone"></i> Call Registration
                                <i class="fas fa-chevron-down submenu-toggle" style="margin-left: auto;"></i>
                            </button>
                            <ul class="submenu" style="list-style: none; padding-left: 20px;">
                                <li>
                                    <button class="nav-item" data-section="complaint">
                                        <i class="fas fa-file-alt"></i> New Complaint/Job
                                    </button>
                                </li>
                                <!-- ✅ Added Upload by CSV menu item -->
                                <li>
                                    <button class="nav-item" data-section="upload-csv">
                                        <i class="fas fa-upload"></i> Upload by CSV
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="job-history">
                                        <i class="fas fa-history"></i> Job History
                                    </button>
                                </li>
                            </ul>
                        </li>

                        <!-- Service Center with submenu -->
                        <li class="has-submenu">
                            <button class="nav-item submenu-trigger">
                                <i class="fas fa-building"></i> Service Center
                                <i class="fas fa-chevron-down submenu-toggle" style="margin-left: auto;"></i>
                            </button>
                            <ul class="submenu" style="list-style: none; padding-left: 20px;">
                                <li>
                                    <button class="nav-item" data-section="list-service-centers">
                                        <i class="fas fa-list"></i> List Service Centers
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="service-partners">
                                        <i class="fas fa-handshake"></i> Service Partners
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="cc-agent">
                                        <i class="fas fa-headset"></i> Call Center Agent
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="job-transfer" style="display: none;">
                                        <i class="fas fa-exchange-alt"></i> Job Transfer
                                    </button>
                                </li>
                            </ul>
                        </li>
                        <!-- Manage Engineers -->
                        <li class="has-submenu">
                            <button class="nav-item submenu-trigger">
                                <i class="fas fa-users-cog"></i> Manage Engineers
                                <i class="fas fa-chevron-down submenu-toggle" style="margin-left: auto;"></i>
                            </button>
                            <ul class="submenu" style="list-style: none; padding-left: 20px;">
                                <li>
                                    <button class="nav-item" data-section="add-engineer">
                                        <i class="fas fa-user-plus"></i> Add Engineer

                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="engineer-list">
                                        <i class="fas fa-list"></i> Engineer List

                                    </button>
                                </li>
                            </ul>
                        </li>

                        <!-- Complaints with submenu -->
                        <li class="has-submenu">
                            <button class="nav-item submenu-trigger">
                                <i class="fas fa-exclamation-circle"></i> Complaints
                                <i class="fas fa-chevron-down submenu-toggle" style="margin-left: auto;"></i>
                            </button>
                            <ul class="submenu" style="list-style: none; padding-left: 20px;">
                                <li>
                                    <button class="nav-item" data-section="unassigned-complaints">
                                        <i class="fas fa-inbox"></i> Unassigned
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="pending-complaints">
                                        <i class="fas fa-clock"></i> Pending
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="assigned-complaints">
                                        <i class="fas fa-user-check"></i> Assigned
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="complete-complaints">
                                        <i class="fas fa-check-circle"></i> Complete
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="cancelled-complaints">
                                        <i class="fas fa-times-circle"></i> Cancelled
                                    </button>
                                </li>
                            </ul>
                        </li>

                        <!-- Engineer Section with submenu -->
                        <li class="has-submenu" style="display: none;">
                            <button class="nav-item submenu-trigger">
                                <i class="fas fa-hard-hat"></i> Engineer
                                <i class="fas fa-chevron-down submenu-toggle" style="margin-left: auto;"></i>
                            </button>
                            <ul class="submenu" style="list-style: none; padding-left: 20px;">
                                <li>
                                    <button class="nav-item" data-section="current-assignment">
                                        <i class="fas fa-tasks"></i> Assigned Jobs
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="update-status">
                                        <i class="fas fa-edit"></i> Update Status
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="request-parts">
                                        <i class="fas fa-tools"></i> Request Parts
                                    </button>
                                </li>
                            </ul>
                        </li>

                        <!-- Delivery Challan -->
                        <li>
                            <button class="nav-item" data-section="delivery-challan" style="display: none;">
                                <i class="fas fa-file-invoice"></i> Delivery Challan
                        </li>

                    </ul>
                </div>
                <div class="nav-section">
                    <p class="nav-title" style="margin: 10px 0; font-weight: bold;">Reports</p>
                    <ul class="nav-list" style="list-style: none; padding: 0;">
                        <li class="has-submenu">
                            <button class="nav-item submenu-trigger">
                                <i class="fas fa-file-csv"></i> Complaint Reports
                                    <i class="fas fa-chevron-down submenu-toggle" style="margin-left: auto;"></i>
                            </button>
                            <ul class="submenu" style="list-style: none; padding-left: 20px;">
                                <li>
                                    <button class="nav-item" data-section="complaint-report-overview">
                                        <i class="fas fa-calendar-day"></i>Todays
                                    </button>
                                </li>
                                <li>
                                    <button class="nav-item" data-section="complaint-report-filter">
                                        <i class="fas fa-calendar-alt"></i>All
                                    </button>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
                <div class="nav-section">
                    <p class="nav-title" style="margin: 10px 0; font-weight: bold;">Settings</p>
                    <ul class="nav-list" style="list-style: none; padding: 0;">
                        <li>
                            <button class="nav-item" data-section="preferences">
                                <i class="fas fa-cog"></i> Preferences
                            </button>
                        </li>
                        <li>
                            <button class="nav-item" data-section="user-management">
                                <i class="fas fa-users"></i> User Management
                            </button>
                        </li>
                    </ul>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <div class="main-content" id="mainContent">
            <!-- Header -->
            <header class="header">
                <div class="header-left">
                    <button class="menu-toggle" id="menuToggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h2>Customer Service Portal</h2>
                </div>
                <div class="header-right">
                    <button class="refresh-btn" id="headerRefreshBtn" title="Refresh Dashboard">
                        <i class="fas fa-sync-alt"></i>
                    </button>
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search customers, jobs...">
                    </div>
                    <button class="notification-btn">
                        <i class="fas fa-bell"></i>
                    </button>
                    <div class="user-profile">
                        <div class="user-avatar" id="userAvatar" onclick="toggleUserDropdown()">JD</div>
                        <div class="user-info">
                            <div class="user-name" id="userName">Loading...</div>
                            <div class="user-role" id="userRole">Loading...</div>
                        </div>


                        <!-- User Dropdown Menu -->
                        <div class="user-dropdown" id="userDropdown">
                            <div class="dropdown-item" id="changePasswordBtn">
                                <i class="fas fa-key"></i>
                                <span>Change Password</span>
                            </div>
                            <div class="dropdown-item" id="logoutBtn">
                                <i class="fas fa-sign-out-alt"></i>
                                <span>Logout</span>
                            </div>
                        </div>

                    </div>
                </div>
            </header>

            <!-- Content Area -->
            <main class="content">
                <!-- Dashboard Overview -->
                <div id="overview" class="section active">
                    <div class="section-header">
                        <h3>Dashboard Overview</h3>
                        <p>Welcome back! Here's what's happening with your service requests.</p>
                    </div>

                    <!-- Stats Grid -->
                    <div class="stats-grid">
                        <div class="stat-card clickable-counter" data-counter="customers">
                            <div class="stat-content">
                                <div>
                                    <div class="stat-label">Total Customers</div>
                                    <div class="stat-value" id="totalCustomers">1,234</div>
                                </div>
                                <div class="stat-icon blue">
                                    <i class="fas fa-users"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card clickable-counter" data-counter="active">
                            <div class="stat-content">
                                <div>
                                    <div class="stat-label">Active Jobs</div>
                                    <div class="stat-value" id="activeJobs">89</div>
                                </div>
                                <div class="stat-icon orange">
                                    <i class="fas fa-cog"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card clickable-counter" data-counter="completed">
                            <div class="stat-content">
                                <div>
                                    <div class="stat-label">Completed Jobs</div>
                                    <div class="stat-value" id="completedJobs">567</div>
                                </div>
                                <div class="stat-icon green">
                                    <i class="fas fa-check-circle"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card clickable-counter" data-counter="pending">
                            <div class="stat-content">
                                <div>
                                    <div class="stat-label">Pending Jobs</div>
                                    <div class="stat-value" id="pendingJobs">23</div>
                                </div>
                                <div class="stat-icon yellow">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Counter Details Container -->
                    <div id="counterDetails" style="display: none;"></div>



                    <!-- Dashboard Grid -->
                    <div class="dashboard-grid">
                        <div class="card">
                            <div class="card-header">
                                <h4><i class="fas fa-chart-line"></i> Recent Activity</h4>
                                <p>Latest system activities</p>
                            </div>
                            <div class="card-content">
                                <div class="activity-list">
                                    <div class="activity-item">
                                        <div class="activity-dot green"></div>
                                        <div class="activity-content">
                                            <div class="activity-title">New complaint registered</div>
                                            <div class="activity-subtitle">Customer: John Doe</div>
                                        </div>
                                        <div class="activity-time">2 min ago</div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-dot blue"></div>
                                        <div class="activity-content">
                                            <div class="activity-title">Engineer assigned</div>
                                            <div class="activity-subtitle">Job ID: IN170625000001</div>
                                        </div>
                                        <div class="activity-time">5 min ago</div>
                                    </div>
                                    <div class="activity-item">
                                        <div class="activity-dot orange"></div>
                                        <div class="activity-content">
                                            <div class="activity-title">Job completed</div>
                                            <div class="activity-subtitle">Customer: Jane Smith</div>
                                        </div>
                                        <div class="activity-time">10 min ago</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Updated Quick Actions -->
                        <div class="card">
                            <div class="card-header">
                                <h4>Quick Actions</h4>
                            </div>
                            <div class="card-content">
                                <div class="quick-actions">
                                    <button class="quick-action-btn" data-action="register-complaint">
                                        <i class="fas fa-phone"></i>
                                        <p>Register Complaint</p>
                                    </button>
                                    <button class="quick-action-btn" data-action="view-jobs">
                                        <i class="fas fa-history"></i>
                                        <p>View Job History</p>
                                    </button>
                                    <button class="quick-action-btn" data-action="view-service-centers">
                                        <i class="fas fa-building"></i>
                                        <p>Service Centers</p>
                                    </button>
                                    <button class="quick-action-btn" data-action="add-engineer">
                                        <i class="fas fa-users-cog"></i>
                                        <p>Manage Engineers</p>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Complaint/Job Sheet Section with Product Storage -->
                <div id="complaint" class="section">
                    <div class="section-header">
                        <h3>New Complaint / Job Registration</h3>
                        <p>Register a new service request and automatically save product details</p>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-phone"></i> Complaint / Job Sheet</h4>
                        </div>
                        <div class="card-content">
                            <form id="callForm">
                                <!-- Call Type -->
                                <div class="form-section">
                                    <label class="section-label">Call Type*</label>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="callType" value="installation" />
                                            <span>Installation</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="callType" value="reinstallation" />
                                            <span>Reinstallation</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="callType" value="demo" />
                                            <span>Demo</span>
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="callType" value="repairs" />
                                            <span>Repairs</span>
                                        </label>
                                    </div>
                                    <div id="callType" class="error-message"></div>
                                </div>

                                <!-- Request Information Section -->
                                <div class="form-section">
                                    <h5
                                        style="color: #1e293b; margin-bottom: 16px; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">
                                        <i class="fas fa-info-circle"></i> Request Information
                                    </h5>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="rootRequestId">Root Request ID*</label>
                                            <input type="text" id="rootRequestId" placeholder="Enter root request ID"
                                                required />
                                            <div id="rootRequestIdError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="customerRequestId">Customer Request ID*</label>
                                            <input type="text" id="customerRequestId"
                                                placeholder="Enter customer request ID" required />
                                            <div id="customerRequestIdError" class="error-message"></div>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="ecommerceId">E-commerce ID*</label>
                                            <input type="text" id="ecommerceId" placeholder="Enter e-commerce ID"
                                                required />
                                            <div id="ecommerceIdError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="estimatedDelivery">Estimated Product Delivery Date*</label>
                                            <input type="date" id="estimatedDelivery" placeholder="dd-mm-yyyy"
                                                required />
                                            <div id="estimatedDeliveryError" class="error-message"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Customer Information Section -->
                                <div class="form-section">
                                    <h5
                                        style="color: #1e293b; margin-bottom: 16px; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">
                                        <i class="fas fa-user"></i> Customer Information
                                    </h5>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="fullName">Full Name*</label>
                                            <input type="text" id="fullName" placeholder="Enter full name" required />
                                            <div id="fullName" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="mobile">Mobile Number*</label>
                                            <input type="text" id="mobile" placeholder="10-digit number" required />
                                            <div id="mobile" class="error-message"></div>
                                        </div>
                                    </div>

                                    <!-- Address Information -->
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="houseNo">House/Flat No*</label>
                                            <input type="text" id="houseNo" placeholder="Enter house/flat number"
                                                required />
                                            <div id="houseNo" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="street">Street, Area, Sector*</label>
                                            <input type="text" id="street" placeholder="Enter street name" required />
                                            <div id="streetError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="landmark">Landmark</label>
                                            <input type="text" id="landmark" placeholder="E.g., near apollo hospital" />
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="pin">Pin Code*</label>
                                            <input type="text" id="pin" placeholder="6-digit pincode" required
                                                maxlength="6" />
                                            <div id="pinError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="locality">Locality*</label>
                                            <select id="locality" required>
                                                <option value="">-- Select locality --</option>
                                            </select>
                                            <div id="localityError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="city">City*</label>
                                            <input type="text" id="city" placeholder="City" readonly />
                                            <div id="cityError" class="error-message"></div>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="stateVisible">State*</label>
                                            <input type="text" id="stateVisible"
                                                placeholder="State will appear here automatically by Pincode" readonly
                                                style="background-color: #f1f1f1;" />
                                            <select id="stateSelect" required style="display: none;">
                                                <option value="">-- Select State --</option>
                                                <option value="01">JAMMU AND KASHMIR</option>
                                                <option value="02">HIMACHAL PRADESH</option>
                                                <option value="03">PUNJAB</option>
                                                <option value="04">CHANDIGARH</option>
                                                <option value="05">UTTARAKHAND</option>
                                                <option value="06">HARYANA</option>
                                                <option value="07">DELHI</option>
                                                <option value="08">RAJASTHAN</option>
                                                <option value="09">UTTAR PRADESH</option>
                                                <option value="10">BIHAR</option>
                                                <option value="11">SIKKIM</option>
                                                <option value="12">ARUNACHAL PRADESH</option>
                                                <option value="13">NAGALAND</option>
                                                <option value="14">MANIPUR</option>
                                                <option value="15">MIZORAM</option>
                                                <option value="16">TRIPURA</option>
                                                <option value="17">MEGHALAYA</option>
                                                <option value="18">ASSAM</option>
                                                <option value="19">WEST BENGAL</option>
                                                <option value="20">JHARKHAND</option>
                                                <option value="21">ODISHA</option>
                                                <option value="22">CHATTISGARH</option>
                                                <option value="23">MADHYA PRADESH</option>
                                                <option value="24">GUJARAT</option>
                                                <option value="26">DADRA AND NAGAR HAVELI AND DAMAN AND DIU</option>
                                                <option value="27">MAHARASHTRA</option>
                                                <option value="28">ANDHRA PRADESH</option>
                                                <option value="29">KARNATAKA</option>
                                                <option value="30">GOA</option>
                                                <option value="31">LAKSHADWEEP</option>
                                                <option value="32">KERELA</option>
                                                <option value="33">TAMIL NADU</option>
                                                <option value="34">PUDUCHERRY</option>
                                                <option value="35">ANDAMAN AND NICOBAR ISLANDS</option>
                                                <option value="36">TELANGANA</option>
                                                <option value="37">ANDHRA PRADESH</option>
                                                <option value="38">LADAKH</option>
                                                <option value="97">OTHER TERRITORY</option>
                                                <option value="99">CENTRE JURISDICTION</option>
                                            </select>
                                            <div id="stateSelectError" class="error-message"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Product Information Section -->
                                <div class="form-section">
                                    <h5
                                        style="color: #1e293b; margin-bottom: 16px; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">
                                        <i class="fas fa-box"></i> Product Information
                                        <small style="color: #64748b; font-weight: normal;">(This product will be
                                            automatically saved to your account)</small>
                                    </h5>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="productType">Product Type*</label>
                                            <select id="productType" required>
                                                <option value="">-- Select Product Type --</option>
                                                <option value="GATEWAY">GATEWAY</option>
                                                <option value="IR BLASTER">IR BLASTER</option>
                                                <option value="SMART RETROFIT">SMART RETROFIT</option>
                                                <option value="SMART COB">SMART COB</option>
                                                <option value="SMART PANEL">SMART PANEL</option>
                                                <option value="SMART STRIP">SMART STRIP</option>
                                                <option value="SMART CAMERA">SMART CAMERA</option>
                                                <option value="SMART DOORBELL">SMART DOORBELL</option>
                                                <option value="SMART DOOR LOCK">SMART DOOR LOCK</option>
                                            </select>
                                            <div id="productTypeError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="productName">Product Name*</label>
                                            <select id="productName" required>
                                                <option value="">-- Select Product Name --</option>
                                            </select>
                                            <div id="productNameError" class="error-message"></div>
                                        </div>
                                        <!-- <div class="form-group">
                                            <label for="symptoms">Symptoms*</label>
                                            <select id="symptoms" required>
                                                <option value="">-- Select Symptoms --</option>
                                                <option value="Engineer visit for Installation">Installation Request
                                                </option>
                                                <option value="Repair">Repair Request</option>
                                            </select>
                                            <div id="symptomsError" class="error-message"></div>
                                        </div> -->
                                        <!-- <div class="form-group">
                                            <label for="modelNo">Model No.*</label>
                                            <input type="text" id="modelNo" placeholder="Enter model number" required />
                                            <div id="modelNoError" class="error-message"></div>
                                        </div> -->
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="manufacturer">Brand*</label>
                                            <input type="text" id="manufacturer" placeholder="E.g., Samsung, LG, Apple"
                                                required />
                                            <div id="manufacturerError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="modelNo">Model No.*</label>
                                            <input type="text" id="modelNo" placeholder="Enter model number" required />
                                            <div id="modelNoError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="serial">Serial Number</label>
                                            <input type="text" id="serial" placeholder="E.g., AB123456789" />
                                            <div id="serialError" class="error-message"></div>
                                        </div>
                                    </div>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="purchaseDate">Date of Purchase*</label>
                                            <input type="date" id="purchaseDate" required />
                                            <div id="purchaseDateError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="warrantyExpiry">Warranty*</label>
                                            <select id="warrantyExpiry" required>
                                                <option value="">-- Select Warranty Status --</option>
                                                <option value="in_warranty">In Warranty</option>
                                                <option value="out_of_warranty">Out of Warranty</option>
                                                <option value="unknown">Warranty Void</option>
                                            </select>
                                            <div id="warrantyExpiryError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="symptoms">Symptoms*</label>
                                            <select id="symptoms" required>
                                                <option value="">-- Select Symptoms --</option>
                                                <option value="Engineer visit for Installation">Installation Request
                                                </option>
                                                <option value="Repair">Repair Request</option>
                                            </select>
                                            <div id="symptomsError" class="error-message"></div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Service Information Section -->
                                <div class="form-section">
                                    <h5
                                        style="color: #1e293b; margin-bottom: 16px; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px;">
                                        <i class="fas fa-calendar"></i> Service Information
                                    </h5>

                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="availableDate">Customer Available Date*</label>
                                            <input type="date" id="availableDate" required />
                                            <div id="availableDateError" class="error-message"></div>
                                        </div>
                                        <div class="form-group">
                                            <label for="preferredTime">Preferred Time Slot*</label>
                                            <select id="preferredTime" required>
                                                <option value="">-- Select time slot --</option>
                                                <option value="10am-1pm">10 AM – 1 PM</option>
                                                <option value="2pm-4pm">2 PM – 4 PM</option>
                                                <option value="4pm-7pm">4 PM – 7 PM</option>
                                            </select>
                                            <div id="preferredTimeError" class="error-message"></div>
                                        </div>
                                    </div>

                                    <!-- Optional Comments -->
                                    <div class="form-group">
                                        <label for="comments">Additional Comments</label>
                                        <textarea id="comments" rows="3"
                                            placeholder="Any additional information or special instructions..."></textarea>
                                    </div>
                                    <div class="form-section">
                                        <label class="section-label" for="servicePartner">Assign Service
                                            Partner*</label>
                                        <input type="text" id="servicePartner" name="servicePartner" class="form-input"
                                            readonly
                                            placeholder="Automatically assigned by pincode-service partner mapping" />
                                        <div id="servicePartnerError" class="error-message"></div>
                                    </div>

                                    <!-- Call Priority -->
                                    <div class="form-section">
                                        <label class="section-label">Call Priority*</label>
                                        <div class="radio-group">
                                            <label class="radio-label">
                                                <input type="radio" name="priority" value="Normal" />
                                                <span>Normal</span>
                                            </label>
                                            <label class="radio-label urgent">
                                                <input type="radio" name="priority" value="Urgent" />
                                                <span>Urgent</span>
                                            </label>
                                        </div>
                                        <div id="priority" class="error-message"></div>
                                    </div>
                                </div>

                                <!-- Submit Button -->
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary" style="float: left;">
                                        <i class="fas fa-phone"></i> Register Call & Save Product
                                    </button>
                                    <button type="button" class="btn btn-outline" id="resetBtn">
                                        <i class="fas fa-undo"></i> Reset Form
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                 <!-- Upload Complaints by CSV Section -->
                <div id="upload-csv" class="section">
                    <div class="section-header">
                        <h3><i class="fas fa-upload"></i> Upload Complaints by CSV</h3>
                        <p class="section-description">Bulk upload new complaints/jobs using a CSV file</p>
                    </div>

                    <div class="content-card">
                        <div class="card-header">
                            <h4><i class="fas fa-file-csv"></i> CSV Upload</h4>
                        </div>

                        <div class="card-content">
                            <form id="csvUploadForm">
                                <!-- Download Template Section -->
                                <div class="form-section">
                                    <div class="section-title">
                                        <i class="fas fa-download"></i>
                                        <span>Download Template</span>
                                    </div>
                                    <p class="section-description">Download the CSV template with all required fields and sample data.</p>
                                    <button type="button" class="btn btn-outline-primary" onclick="downloadTemplate()">
                                        <i class="fas fa-file-download"></i> Download CSV Template
                                    </button>
                                </div>

                                <!-- Upload CSV File Section -->
                                <div class="form-section">
                                    <div class="section-title">
                                        <i class="fas fa-file-upload"></i>
                                        <span>Upload CSV File</span>
                                    </div>
                                    
                                    <div class="csv-dropzone" id="csv-dropzone">
                                        <div class="dropzone-content">
                                            <i class="fas fa-file-csv dropzone-icon"></i>
                                            <p class="dropzone-text">Drag and drop your CSV file here or click to browse</p>
                                            <input type="file" id="csvFileInput" accept=".csv" style="display: none;" />
                                            <button type="button" class="btn btn-primary" onclick="document.getElementById('csvFileInput').click();">
                                                <i class="fas fa-folder-open"></i> Browse Files
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div id="csvFileName" class="file-name-display"></div>
                                    <div id="csvFileError" class="error-message"></div>
                                </div>

                                <!-- Submit Button Section -->
                                <div class="form-section">
                                    <button type="button" class="btn btn-success" id="submitCSVBtn" onclick="submitCSVFile()">
                                        <i class="fas fa-paper-plane"></i> Submit CSV
                                    </button>
                                </div>
                            </form>

                            <!-- CSV Preview Table -->
                            <div id="csvPreviewContainer" class="csv-preview-container" style="display: none;">
                                <div class="preview-header">
                                    <h5><i class="fas fa-table"></i> Parsed CSV Preview</h5>
                                </div>
                                <div class="table-container">
                                    <table id="csvPreviewTable" class="preview-table">
                                        <!-- Rows dynamically generated via JS -->
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Enhanced Job History Section -->
                <div id="job-history" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Job History</h3>
                            <p>Search and track all service requests by customer details</p>
                        </div>
                        <button class="btn btn-primary">Create New Job</button>
                    </div>

                    <!-- Customer Search Card -->
                    <div class="card" style="margin-bottom: 24px;">
                        <div class="card-header">
                            <h4><i class="fas fa-search"></i> Search Customer Jobs</h4>
                        </div>
                        <div class="card-content">
                            <form id="customerSearchForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="searchCustomerName">Customer Name*</label>
                                        <input type="text" id="searchCustomerName"
                                            placeholder="Enter customer full name" required />
                                        <div id="searchCustomerNameError" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="searchMobile">Mobile Number*</label>
                                        <input type="text" id="searchMobile" placeholder="10-digit mobile number"
                                            required />
                                        <div id="searchMobileError" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="searchPincode">Pin Code*</label>
                                        <input type="text" id="searchPincode" placeholder="6-digit pincode" required />
                                        <div id="searchPincodeError" class="error-message"></div>
                                    </div>
                                </div>
                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-search"></i> Search Jobs
                                    </button>
                                    <button type="button" class="btn btn-outline" id="clearSearchBtn">
                                        <i class="fas fa-times"></i> Clear Search
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Jobs Results Card -->
                    <div class="card" style="display: none;" id="jobsResultCard">
                        <div class="card-header">
                            <div class="table-header">
                                <h4>Service Jobs</h4>
                                <div class="search-box">
                                    <i class="fas fa-search"></i>
                                    <input type="text" id="jobTableSearch" placeholder="Search in results...">
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <!-- Loading indicator -->
                            <div id="loadingIndicator" style="display: none; text-align: center; padding: 20px;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; color: #2563eb;"></i>
                                <p style="margin-top: 10px; color: #64748b;">Searching for customer jobs...</p>
                            </div>

                            <!-- No results message -->
                            <div id="noResultsMessage" style="display: none; text-align: center; padding: 40px;">
                                <i class="fas fa-search"
                                    style="font-size: 48px; color: #cbd5e1; margin-bottom: 16px;"></i>
                                <h4 style="color: #64748b; margin-bottom: 8px;">No Jobs Found</h4>
                                <p style="color: #9ca3af;">Enter customer details above to search for their service
                                    history.</p>
                            </div>

                            <!-- Jobs table -->
                            <div class="table-container" id="jobsTableContainer">
                                <table class="jobs-table" id="jobsTable">
                                    <thead>
                                        <tr>
                                            <th>Job ID</th>
                                            <th>Customer Details</th>
                                            <th>Service Type</th>
                                            <th>Status</th>
                                            <th>Priority</th>
                                            <th>Technician</th>
                                            <th>Created Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="jobsTableBody">
                                        <!-- Dynamic content will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- NEW: List Service Centers Section -->
                <div id="list-service-centers" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Service Centers</h3>
                            <p>View and manage service centers by pin code</p>
                        </div>
                    </div>

                    <!-- Search Service Centers Card -->
                    <div class="card" style="margin-bottom: 24px;">
                        <div class="card-header">
                            <h4><i class="fas fa-search"></i> Search Service Centers</h4>
                        </div>
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group" style="max-width: 300px;">
                                    <label for="serviceCenterPinCode">Pin Code*</label>
                                    <div style="display: flex; gap: 12px;">
                                        <input type="text" id="serviceCenterPinCode" placeholder="6-digit pincode"
                                            maxlength="6" required />
                                        <button type="button" class="btn btn-primary" id="searchServiceCentersBtn">
                                            <i class="fas fa-search"></i> Search
                                        </button>
                                        <button type="button" class="btn btn-outline" id="clearServiceCenterSearchBtn">
                                            <i class="fas fa-times"></i> Clear
                                        </button>
                                    </div>
                                    <div id="pinError" class="error-message"></div>
                                </div>
                            </div>
                        </div>

                    </div>

                    <!-- Service Centers Results -->
                    <div class="card" id="serviceCentersResultCard" style="display: none;">
                        <div class="card-header">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <h4>Service Centers</h4>
                                <!-- Job Status Tabs -->
                                <div class="job-status-tabs">
                                    <button class="tab-btn active" data-status="all">All Centers</button>
                                    <button class="tab-btn" data-status="active">Active Centers</button>
                                    <button class="tab-btn" data-status="inactive">Inactive Centers</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <!-- Loading indicator -->
                            <div id="serviceCenterLoadingIndicator"
                                style="display: none; text-align: center; padding: 20px;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; color: #2563eb;"></i>
                                <p style="margin-top: 10px; color: #64748b;">Searching for service centers...</p>
                            </div>

                            <!-- No results message -->
                            <div id="noServiceCentersMessage" style="display: none; text-align: center; padding: 40px;">
                                <i class="fas fa-building"
                                    style="font-size: 48px; color: #cbd5e1; margin-bottom: 16px;"></i>
                                <h4 style="color: #64748b; margin-bottom: 8px;">No Service Centers Found</h4>
                                <p style="color: #9ca3af;">Enter a pincode above to search for service centers in that
                                    area.</p>
                            </div>

                            <!-- Service Centers Table -->
                            <div class="table-container" id="serviceCentersTableContainer">
                                <table class="jobs-table" id="serviceCentersTable">
                                    <thead>
                                        <tr>
                                            <th>Center ID</th>
                                            <th>Partner Name</th>
                                            <th>Operating Pincodes</th>
                                            <th>Contact Person</th>
                                            <th>Email & Services</th>
                                            <th>Phone</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="partnersListTable">
                                        <!-- Dynamic content will be populated here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                </div>
<!-- Edit Service Center Modal -->
<div id="editServiceCenterModal" class="modal" style="display: none;">
  <div class="modal-content" style="
    position: relative;
    padding: 25px 30px;
    border-radius: 12px;
    width: 100%;
    max-width: 800px;
    margin: auto;
    background-color: #fff;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  ">

    <!-- Close Button -->
    <span class="close"
          onclick="document.getElementById('editServiceCenterModal').style.display='none'"
          style="
            position: absolute;
            top: 12px;
            right: 16px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            color: #999;
          ">&times;</span>

    <h3 style="margin-bottom: 20px; font-size: 20px; font-weight: 600;">Edit Service Center</h3>

    <input type="hidden" id="editServiceCenterId">

    <!-- Form Rows -->
    <div class="form-row" style="display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;">
      <div class="form-group" style="flex: 1;">
        <label for="companyName" style="font-weight: 500;">Company Name</label>
        <input type="text" id="editcompanyName" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
      <div class="form-group" style="flex: 1;">
        <label for="contactPerson" style="font-weight: 500;">Contact Person</label>
        <input type="text" id="editcontactPerson" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
    </div>

    <div class="form-row" style="display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;">
      <div class="form-group" style="flex: 1;">
        <label for="partnerEmail" style="font-weight: 500;">Email</label>
        <input type="email" id="editpartnerEmail" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
      <div class="form-group" style="flex: 1;">
        <label for="partnerPhone" style="font-weight: 500;">Phone Number</label>
        <input type="text" id="editpartnerPhone" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
    </div>

    <div class="form-row" style="display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;">
      <div class="form-group" style="flex: 1;">
        <label for="gstNumber" style="font-weight: 500;">GST Number</label>
        <input type="text" id="editgstNumber" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
      <div class="form-group" style="flex: 1;">
        <label for="panNumber" style="font-weight: 500;">PAN Number</label>
        <input type="text" id="editpanNumber" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
    </div>

    <div class="form-row" style="display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;">
      <div class="form-group" style="flex: 1;">
        <label for="aadharNumber" style="font-weight: 500;">Aadhar Number</label>
        <input type="text" id="editaadharNumber" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
      <div class="form-group" style="flex: 1;">
        <label for="partnerAddress" style="font-weight: 500;">Company Address</label>
        <input type="text" id="editpartnerAddress" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
    </div>

    <!-- New Status Field -->
    <div class="form-row" style="display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;">
      <div class="form-group" style="flex: 1;">
        <label for="status" style="font-weight: 500;">Status</label>
        <select id="status" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
          background-color: #fff;
        ">
          <option value="Active">Active</option>
          <option value="Inactive">Inactive</option>
        </select>
      </div>
    </div>

    <!-- File Uploads -->
    <div class="form-row" style="display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;">
      <div class="form-group" style="flex: 1;">
        <label for="editGSTFile" style="font-weight: 500;">Upload GST Certificate</label>
        <input type="file" id="editGSTFile" name="editGSTFile" accept=".jpg,.jpeg,.png,.pdf" class="form-control" style="
          width: 100%;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
      <div class="form-group" style="flex: 1;">
        <label for="editPANFile" style="font-weight: 500;">Upload PAN Card</label>
        <input type="file" id="editPANFile" name="editPANFile" accept=".jpg,.jpeg,.png,.pdf" class="form-control" style="
          width: 100%;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
    </div>

    <div class="form-row" style="display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;">
      <div class="form-group" style="flex: 1;">
        <label for="editAadharFile" style="font-weight: 500;">Upload Aadhaar Card</label>
        <input type="file" id="editAadharFile" name="editAadharFile" accept=".jpg,.jpeg,.png,.pdf" class="form-control" style="
          width: 100%;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
      <div class="form-group" style="flex: 1;">
        <label for="editCompanyRegFile" style="font-weight: 500;">Upload Company Registration Certificate</label>
        <input type="file" id="editCompanyRegFile" name="editCompanyRegFile" accept=".jpg,.jpeg,.png,.pdf" class="form-control" style="
          width: 100%;
          border: 1px solid #ccc;
          border-radius: 6px;
        ">
      </div>
    </div>
    <div class="form-row" style="display: flex; justify-content: space-between; gap: 20px; margin-bottom: 15px;">
      <div class="form-group" style="flex: 1;">
        <label for="oldPassword" style="font-weight: 500;">Old Password</label>
        <input type="text" id="service_oldPassword" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        " placeholder="Enter old password">
      </div>
      <div class="form-group" style="flex: 1;">
        <label for="service_newPassword" style="font-weight: 500;">New Password</label>
        <input type="password" id="service_newPassword" class="form-control" style="
          width: 100%;
          padding: 8px 10px;
          border: 1px solid #ccc;
          border-radius: 6px;
        " placeholder="Enter new password">
      </div>
    </div>

    <!-- Save Button -->
    <div class="form-actions" style="margin-top: 20px; text-align: right;">
      <button id="saveServiceCenterBtn" class="btn btn-primary" style="
        background-color: #007bff;
        color: #fff;
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-size: 15px;
        cursor: pointer;
        display: inline-flex;
        align-items: center;
        gap: 6px;
      ">
        <i class="fas fa-save"></i> Save Changes
      </button>
    </div>

  </div>
</div>


                <!-- NEW: Service Partners Section -->
                <div id="service-partners" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Service Partners</h3>
                            <p>Add and manage service partners</p>
                        </div>
                        <button class="btn btn-primary" id="viewAllPartnersBtn">View All Partners</button>
                    </div>

                    <!-- Add New Service Partner Card -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-plus"></i> Add New Service Partner</h4>
                            <p style="color: #64748b; font-size: 14px; margin: 4px 0 0;">Register new service partners
                            </p>
                        </div>
                        <div class="card-content">
                            <form id="addServicePartnerForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Company Name *</label>
                                        <input type="text" id="companyName" class="form-control" required>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Contact Person *</label>
                                        <input type="text" id="contactPerson" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Email Address *</label>
                                        <input type="email" id="partnerEmail" class="form-control" required>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Phone Number *</label>
                                        <input type="tel" id="partnerPhone" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>GST Number *</label>
                                        <input type="text" id="gstNumber" class="form-control" required>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label>PAN Number *</label>
                                        <input type="text" id="panNumber" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Aadhar Card Number *</label>
                                        <input type="text" id="aadharNumber" class="form-control" required>
                                        <span class="error-message" id="aadhar_numberError"></span>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Operating PIN Codes *</label>
                                    <div class="pin-codes-input-container">
                                        <div class="pin-codes-display" id="pinCodesDisplay"></div>
                                        <div class="form-row">
                                            <div class="form-group" style="flex: 1;">
                                                <input type="file" id="pinCodesCSV" class="form-control" accept=".csv"
                                                    onchange="handleCSVUpload(event)">
                                                <small style="color: #64748b;">Upload CSV file with PIN codes and
                                                    Product</small>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Company Address *</label>
                                    <textarea id="partnerAddress" class="form-control" rows="3" required></textarea>
                                </div>

                                <!-- Document Upload Section -->
                                <div class="form-section">
                                    <h5 class="section-label">Document Attachments *</h5>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>GST Certificate</label>
                                            <input type="file" id="gstCertificate" class="form-control"
                                                accept=".pdf,.jpg,.jpeg,.png" required>
                                        </div>
                                        <div class="form-group">
                                            <label>PAN Card</label>
                                            <input type="file" id="panCard" class="form-control"
                                                accept=".pdf,.jpg,.jpeg,.png" required>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Aadhar Card</label>
                                            <input type="file" id="aadharCard" class="form-control"
                                                accept=".pdf,.jpg,.jpeg,.png" required>
                                        </div>
                                        <div class="form-group">
                                            <label>Company Registration Certificate</label>
                                            <input type="file" id="companyCertificate" class="form-control"
                                                accept=".pdf,.jpg,.jpeg,.png">
                                        </div>
                                    </div>
                                </div>

                                <!-- Approval Status Display -->
                                <div class="form-group" id="partnerApprovalStatusGroup" style="display: none;">
                                    <label>Approval Status</label>
                                    <div id="partnerApprovalStatus" class="badge badge-warning">Pending Admin Approval
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn btn-outline" onclick="resetPartnerForm()">
                                        <i class="fas fa-undo"></i> Reset
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-paper-plane"></i> Submit for Approval
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- NEW: CC AGENT Section -->
                <div id="cc-agent" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Call Center Agent</h3>
                            <p>Add and manage call center agent</p>
                        </div>
                        <button class="btn btn-primary" id="viewAllPartnersBtn">View All Agents</button>
                    </div>

                    <!-- Add New CC AGENT Card -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-plus"></i> Add New Call Center Agent</h4>
                            <p style="color: #64748b; font-size: 14px; margin: 4px 0 0;">Register new call center agent
                            </p>
                        </div>
                        <div class="card-content">
                            <form id="addccagentForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Full Name *</label>
                                        <input type="text" id="cc_fullname" class="form-control" required>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Contact Person *</label>
                                        <input type="text" id="cc_contactPerson" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Email Address *</label>
                                        <input type="email" id="cc_Email" class="form-control" required>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label>Phone Number *</label>
                                        <input type="tel" id="cc_Phone" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>GST Number *</label>
                                        <input type="text" id="cc_gstNumber" class="form-control" required>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label>PAN Number *</label>
                                        <input type="text" id="cc_panNumber" class="form-control" required>
                                    </div>
                                    <div class="form-group">
                                        <label>Aadhar Card Number *</label>
                                        <input type="text" id="cc_aadharNumber" class="form-control" required>
                                        <span class="error-message" id="aadhar_numberError"></span>
                                    </div>
                                </div>


                                <div class="form-group">
                                    <label>Operating PIN Codes *</label>
                                    <div class="pin-codes-input-container">
                                        <div class="pin-codes-display" id="pinCodesDisplay"></div>
                                        <div class="form-row">
                                            <div class="form-group" style="flex: 1;">
                                                <input type="file" id="cc_pinCodesCSV" class="form-control" accept=".csv"
                                                    onchange="handleCSVUpload(event)">
                                                <small style="color: #64748b;">Upload CSV file with PIN codes and
                                                    Product</small>
                                            </div>

                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label>Company Address *</label>
                                    <textarea id="cc_Address" class="form-control" rows="3" required></textarea>
                                </div>

                                <!-- Document Upload Section -->
                                <div class="form-section">
                                    <h5 class="section-label">Document Attachments *</h5>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>GST Certificate</label>
                                            <input type="file" id="cc_gstCertificate" class="form-control"
                                                accept=".pdf,.jpg,.jpeg,.png" required>
                                        </div>
                                        <div class="form-group">
                                            <label>PAN Card</label>
                                            <input type="file" id="cc_panCard" class="form-control"
                                                accept=".pdf,.jpg,.jpeg,.png" required>
                                        </div>
                                    </div>
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label>Aadhar Card</label>
                                            <input type="file" id="cc_aadharCard" class="form-control"
                                                accept=".pdf,.jpg,.jpeg,.png" required>
                                        </div>
                                    </div>
                                </div>

                                <!-- Approval Status Display -->
                                <div class="form-group" id="partnerApprovalStatusGroup" style="display: none;">
                                    <label>Approval Status</label>
                                    <div id="cc_ApprovalStatus" class="badge badge-warning">Pending Admin Approval
                                    </div>
                                </div>

                                <div class="form-actions">
                                    <button type="button" class="btn btn-outline" onclick="resetPartnerForm()">
                                        <i class="fas fa-undo"></i> Reset
                                    </button>
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-paper-plane"></i> Submit for Approval
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>


                <!-- Job Transfer Section -->
                <div id="job-transfer" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Job Transfer</h3>
                            <p>Transfer service requests between service centers</p>
                        </div>
                    </div>


                    <!-- Transfer Form -->
                    <div class="form-card">
                        <div class="card-header">
                            <h4><i class="fas fa-exchange-alt"></i> Transfer Job</h4>
                            <p>Transfer a job from one service center to another</p>
                        </div>
                        <div class="card-content">
                            <form id="jobTransferForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="transferComplaintId">Complaint ID *</label>
                                        <input type="text" id="transferComplaintId" name="transferComplaintId"
                                            placeholder="e.g., IN170625000001 or RE170625000001" required>
                                        <small style="color: #64748b; font-size: 12px;">Format: IN/RE + Date + Month +
                                            Sequential Number</small>
                                    </div>

                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="currentServiceCenter">Current Service Center Username *</label>
                                        <input type="text" id="currentServiceCenter" name="currentServiceCenter"
                                            placeholder="Enter current SVC username" required>
                                    </div>
                                    <div class="form-group">
                                        <label for="targetServiceCenter">Target Service Center Username *</label>
                                        <input type="text" id="targetServiceCenter" name="targetServiceCenter"
                                            placeholder="Enter target SVC username" required>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="transferReason">Transfer Reason *</label>
                                    <textarea id="transferReason" name="transferReason" rows="4"
                                        placeholder="Explain why this job needs to be transferred..."
                                        required></textarea>
                                </div>

                                <div class="form-group">
                                    <label for="transferNotes">Additional Notes</label>
                                    <textarea id="transferNotes" name="transferNotes" rows="3"
                                        placeholder="Any additional information for the receiving service center..."></textarea>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-exchange-alt"></i> Transfer Job
                                    </button>
                                    <button type="reset" class="btn btn-outline">
                                        <i class="fas fa-undo"></i> Reset Form
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Transfer History -->
                    <!-- Date Filter -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-filter"></i> Filter Jobs</h4>
                        </div>
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>From Date</label>
                                    <input type="date" id="transferFromDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>To Date</label>
                                    <input type="date" id="transferToDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Current Service Center</label>
                                    <select id="currentServiceCenter" class="form-control">
                                        <option value="">All Centers</option>
                                        <option value="svc_delhi">SVC Delhi</option>
                                        <option value="svc_mumbai">SVC Mumbai</option>
                                        <option value="svc_bangalore">SVC Bangalore</option>
                                    </select>
                                </div>
                                <div class="form-group" style="display: flex; align-items: end;">
                                    <button class="btn btn-primary" onclick="filterTransferJobs()">
                                        <i class="fas fa-search"></i> Apply Filter
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-history"></i> Transfer History</h4>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table class="jobs-table">
                                    <thead>
                                        <tr>
                                            <th>Complaint ID</th>
                                            <th>Customer</th>
                                            <th>Current Center</th>
                                            <th>Target Center</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="transferHistoryTable">
                                        <!--

                                        <tr>
                                            <td class="job-id">IN170625000007</td>
                                            <td>Alex Kumar<br><small>9876543216</small></td>
                                            <td>svc_delhi</td>
                                            <td>svc_mumbai</td>
                                            <td>17/06/2025</td>
                                            <td>Location Change</td>
                                            <td>
                                                <button class="action-btn view-complaint-btn" onclick="viewComplaintDetail('IN170625000007')" title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="action-btn" onclick="viewTransferDetails('IN170625000007')" title="Transfer Details">
                                                    <i class="fas fa-info-circle"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    -->

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>



                <!-- Add Engineer Section -->
                <section id="add-engineer" class="section">
                    <div class="section-header">
                        <h2>Add New Engineer</h2>
                        <p>Register new engineers in the system</p>
                    </div>

                    <div class="form-container">
                        <form id="addEngineerForm" class="engineer-form">
                            <!-- Basic Information -->
                            <div class="form-section">
                                <h3>Basic Information</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="eng_name">Engineer Name *</label>
                                        <input type="text" id="eng_name" name="eng_name" required>
                                        <div id="eng_nameError" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="email">Email Address *</label>
                                        <input type="email" id="email" name="email" required>
                                        <div id="emailError" class="error-message"></div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="contact">Phone Number *</label>
                                        <input type="tel" id="contact" name="contact" required>
                                        <div id="contactError" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="qualification">Qualification *</label>
                                        <input type="text" id="qualification" name="qualification" required>
                                        <div id="qualificationError" class="error-message"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Professional Information -->
                            <div class="form-section">
                                <h3>Professional Information</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="product">Product Specialization *</label>
                                        <input type="text" id="product" name="product" required>
                                        <div id="productError" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="operating_pincode">Operating Pincode *</label>
                                        <input type="text" id="operating_pincode" name="operating_pincode" required>
                                        <div id="operating_pincodeError" class="error-message"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Identity Information -->
                            <div class="form-section">
                                <h3>Identity Information</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="pan_number">PAN Number *</label>
                                        <input type="text" id="pan_number" name="pan_number" required>
                                        <div id="pan_numberError" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="aadhar_number">Aadhar Card Number *</label>
                                        <input type="text" id="aadhar_number" name="aadhar_number" required>
                                        <div id="aadhar_numberError" class="error-message"></div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="driving_license_number">Driving License Number *</label>
                                        <input type="text" id="driving_license_number" name="driving_license_number"
                                            required>
                                        <div id="driving_license_numberError" class="error-message"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Document Uploads -->
                            <div class="form-section">
                                <h3>Document Uploads</h3>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="pan_card">PAN Card (PDF/JPEG only)</label>
                                        <input type="file" id="pan_card" name="pan_card" accept=".pdf,.jpg,.jpeg,.png">
                                        <div id="pan_cardError" class="error-message"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="aadhar_card">Aadhar Card (PDF/JPEG only)</label>
                                        <input type="file" id="aadhar_card" name="aadhar_card"
                                            accept=".pdf,.jpg,.jpeg,.png">
                                        <div id="aadhar_cardError" class="error-message"></div>
                                    </div>
                                </div>
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="driving_licence">Driving License (PDF/JPEG only)</label>
                                        <input type="file" id="driving_licence" name="driving_licence"
                                            accept=".pdf,.jpg,.jpeg,.png">
                                        <div id="driving_licenceError" class="error-message"></div>
                                    </div>
                                </div>
                            </div>

                            <!-- Form Actions -->
                            <div class="form-actions">
                                <button type="button" id="cancelEngineerBtn" class="btn btn-secondary">
                                    <i class="fas fa-times"></i> Cancel
                                </button>
                                <button type="submit" class="btn btn-primary">
                                    <i class="fas fa-plus"></i> Add Engineer
                                </button>
                            </div>
                        </form>
                    </div>
                </section>

                <!-- Engineer List Section -->
                <div id="engineer-list" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Engineer List</h3>
                            <p>Manage and monitor engineer information</p>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-content">
                            <div class="table-container">
                                <table class="jobs-table">
                                    <thead>
                                        <tr>
                                            <th>Engineer ID</th>
                                            <th>Name</th>
                                            <th>Phone</th>
                                            <th>Email</th>
                                            <th>Location</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="engineersTableBody">
                                        <tr>
                                            <td colspan="7" style="text-align: center; padding: 20px; color: #64748b;">
                                                No engineers found. Add engineers to see them here.
                                            </td>
                                        </tr>
                                    </tbody>

                                </table>
                            </div>
                        </div>
                    </div>
                </div>
<!-- Edit Engineer Modal -->
<div id="editEngineerModal" class="modal" style="display: none;">
  <div class="modal-content" style="position: relative; padding: 30px 40px; border-radius: 10px; width: 100%; max-width: 900px; margin: auto;">
    
    <!-- Close Button -->
    <span class="close"
          onclick="document.getElementById('editEngineerModal').style.display='none'"
          style="position: absolute; top: 15px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer;">
      &times;
    </span>

    <h3 style="margin-bottom: 30px;">Edit Engineer</h3>

    <input type="hidden" id="editEngineerId">

    <!-- Form Rows -->
    <div class="form-row">
      <div class="form-group">
        <label for="editFullName">Full Name</label>
        <input type="text" id="editFullName" class="form-control">
      </div>
      <div class="form-group">
        <label for="editEmail">Email</label>
        <input type="email" id="editEmail" class="form-control">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="editPhone">Phone</label>
        <input type="text" id="editPhone" class="form-control">
      </div>
      <div class="form-group">
        <label for="editQualification">Qualification</label>
        <input type="text" id="editQualification" class="form-control">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="editProductSpecialization">Product Specialization</label>
        <input type="text" id="editProductSpecialization" class="form-control">
      </div>
      <div class="form-group">
        <label for="editPincode">Operating Pincode</label>
        <input type="text" id="editPincode" class="form-control">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="editPAN">PAN Number</label>
        <input type="text" id="editPAN" class="form-control">
      </div>
      <div class="form-group">
        <label for="editAadhar">Aadhar Number</label>
        <input type="text" id="editAadhar" class="form-control">
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="editLicense">Driving License</label>
        <input type="text" id="editLicense" class="form-control">
      </div>
      <div class="form-group">
  <label for="editStatus">Status</label>
  <select id="editStatus" class="form-control">
    <option value="Active" selected>Active</option>
    <option value="Inactive">Inactive</option>
  </select>
</div>

    </div>
<div class="form-row">
  <div class="form-group">
    <label for="editPANFile">Upload PAN Card</label>
    <input type="file" id="editPANFile" name="editPANFile" accept=".jpg,.jpeg,.png,.pdf">
    <div id="currentPANLink" class="file-link"></div>
  </div>
  <div class="form-group">
    <label for="editAadharFile">Upload Aadhaar Card</label>
    <input type="file" id="editAadharFile" name="editAadharFile" accept=".jpg,.jpeg,.png,.pdf">
    <div id="currentAadharLink" class="file-link"></div>
  </div>
</div>

<div class="form-row">
  <div class="form-group">
    <label for="editLicenseFile">Upload Driving License</label>
    <input type="file" id="editLicenseFile" name="editLicenseFile" accept=".jpg,.jpeg,.png,.pdf">
    <div id="currentLicenseLink" class="file-link"></div>
  </div>
</div>


    <!-- Save Button -->
    <div class="form-actions" style="margin-top: 30px; text-align: right;">
      <button id="saveEditBtn" class="btn btn-primary" style="
        background-color: #007bff;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 6px;
        font-size: 16px;
        cursor: pointer;
      ">
        <i class="fas fa-save"></i> Save Changes
      </button>
    </div>
  </div>
</div>




                <!-- Unassigned Complaints Section -->
                <section id="unassigned-complaints" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Unassigned Complaints</h3>
                            <p>Manage unassigned service complaints</p>
                        </div>
                    </div>

                    <!-- Date Filter -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-filter"></i> Filter Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>From Date</label>
                                    <input type="date" id="unassignedFromDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>To Date</label>
                                    <input type="date" id="unassignedToDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Service Type</label>
                                    <select id="unassignedServiceType" class="form-control">
                                        <option value="installation">Installation</option>
                                        <option value="reinstallation">Reinstallation</option>
                                        <option value="demo">Demo</option>
                                        <option value="repair">Repair</option>
                                    </select>
                                </div>
                                <div class="form-group" style="display: flex; align-items: end;">
                                    <button class="btn btn-primary" onclick="filterUnassignedComplaints()">
                                        <i class="fas fa-search"></i> Apply Filter
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Complaints Table -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-list"></i> Unassigned Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table class="jobs-table">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox"></th>
                                            <th>Complaint ID</th>
                                            <th>Customer</th>
                                            <th>Service Type</th>
                                            <th>Location</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="unassignedComplaintsTable">

                                        <tr>
                                            <td><input type="checkbox" class="complaint-checkbox"></td>
                                            <td class="job-id">IN170625000001</td>
                                            <td>John Doe<br><small>9876543210</small></td>
                                            <td><span class="badge badge-primary">Installation</span></td>
                                            <td>Delhi 110001</td>
                                            <td>17/06/2025</td>
                                            <td><span class="badge badge-warning">High</span></td>
                                            <td>
                                                <button class="action-btn"
                                                    onclick="viewComplaintDetail('IN170625000001')"
                                                    title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="action-btn"
                                                    onclick="openAssignEngineerModal('IN170625000001')"
                                                    title="Assign Engineer">
                                                    <i class="fas fa-user-plus"></i>
                                                </button>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td><input type="checkbox" class="complaint-checkbox"></td>
                                            <td class="job-id">RE170625000002</td>
                                            <td>Jane Smith<br><small>9876543211</small></td>
                                            <td><span class="badge badge-danger">Repair</span></td>
                                            <td>Mumbai 400001</td>
                                            <td>17/06/2025</td>
                                            <td><span class="badge badge-danger">Urgent</span></td>
                                            <td>
                                                <button class="action-btn"
                                                    onclick="viewComplaintDetail('RE170625000002')"
                                                    title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="action-btn"
                                                    onclick="openAssignEngineerModal('RE170625000002')"
                                                    title="Assign Engineer">
                                                    <i class="fas fa-user-plus"></i>
                                                </button>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Complaint Detail Section (Initially Hidden) -->
                <!-- <div id="complaintDetailCard" class="complaint-detail-wrapper" style="display: none;">
                    <h2>Complaint Details</h2>
                    <div id="complaintDetailGrid" class="grid-container"> -->
                <!-- JavaScript will inject cards here -->
                <!-- </div>
                </div> -->

                <!-- 
                <div id="complaintDetailCard" class="complaint-detail-wrapper" style="display: none; margin-top: 30px;">
                    <h3>Complaint Details</h3>
                    <div id="complaintDetailGrid" class="grid-container"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 16px;">
                    </div>
                </div> -->


                <!-- Engineer Assignment Modal -->
                <!-- <div id="assignEngineerModal" class="modal-overlay" style="display: none;">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h3>Assign Engineer</h3>
                            <button class="modal-close" onclick="closeAssignEngineerModal()">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="form-group">
                                <label>Complaint ID</label>
                                <input type="text" id="assignComplaintId" class="form-control" readonly>
                            </div>
                            <div class="form-group">
                                <label>Select Engineer</label>
                                <select id="engineerSelect" class="form-control">
                                    <option value="">Choose an engineer...</option>
                                    <option value="EN000001">EN000001 - John Smith (Delhi)</option>
                                    <option value="EN000002">EN000002 - Mike Wilson (Mumbai)</option>
                                    <option value="EN000003">EN000003 - Sarah Johnson (Bangalore)</option>
                                    <option value="EN000004">EN000004 - David Brown (Chennai)</option>
                                    <option value="EN000005">EN000005 - Lisa Davis (Pune)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Priority Level</label>
                                <select id="prioritySelect" class="form-control">
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                    <option value="urgent">Urgent</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Scheduled Date</label>
                                <input type="date" id="scheduledDate" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Scheduled Time</label>
                                <input type="time" id="scheduledTime" class="form-control">
                            </div>
                            <div class="form-group">
                                <label>Assignment Notes</label>
                                <textarea id="assignmentNotes" class="form-control" rows="3"
                                    placeholder="Add any special instructions or notes for the engineer..."></textarea>
                            </div>
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-outline" onclick="closeAssignEngineerModal()">Cancel</button>
                            <button class="btn btn-primary" onclick="assignEngineerToComplaint()">Assign
                                Engineer</button>
                        </div>
                    </div>
                </div> -->




                <!-- Pending Complaints Section -->
                <section id="pending-complaints" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Pending Complaints</h3>
                            <p>Manage complaints that are currently being processed</p>
                        </div>
                    </div>

                    <!-- Date Filter -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-filter"></i> Filter Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>From Date</label>
                                    <input type="date" id="pendingFromDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>To Date</label>
                                    <input type="date" id="pendingToDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Service Type</label>
                                    <select id="pendingServiceType" class="form-control">
                                        <option value="installation">Installation</option>
                                        <option value="reinstallation">Reinstallation</option>
                                        <option value="demo">Demo</option>
                                        <option value="repair">Repair</option>
                                    </select>
                                </div>
                                <div class="form-group" style="display: flex; align-items: end;">
                                    <button class="btn btn-primary" onclick="filterPendingComplaints()">
                                        <i class="fas fa-search"></i> Apply Filter
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Complaints Table -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-clock"></i> Pending Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table class="jobs-table">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox"></th>
                                            <th>Complaint ID</th>
                                            <th>Customer</th>
                                            <th>Service Type</th>
                                            <th>Location</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Updated At</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="pendingComplaintsTable">

                                        <tr>
                                            <td><input type="checkbox" class="complaint-checkbox"></td>
                                            <td class="job-id">IN170625000003</td>
                                            <td>Mike Johnson<br><small>9876543212</small></td>
                                            <td><span class="badge badge-primary">Installation</span></td>

                                            <td>Bangalore 560001</td>
                                            <td>17/06/2025</td>
                                            <td><span class="badge badge-warning">In Progress</span></td>
                                            <td>
                                                <button class="action-btn"
                                                    onclick="viewComplaintDetail('IN170625000003')"
                                                    title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="action-btn"
                                                    onclick="updateComplaintStatus('IN170625000003')"
                                                    title="Update Status">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>


                <!-- Complaint Detail Card -->
                <div id="complaintDetailCard" class="complaint-detail-wrapper detail-section"
                    style="display: none; margin-top: 30px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <h3>Complaint Details</h3>
                        <button onclick="closeComplaintDetail()"
                            style="background:#dc3545; color:white; border:none; padding:4px 12px; font-size:16px; border-radius:4px; cursor:pointer;">
                            &times;
                        </button>
                    </div>
                    <div id="complaintDetailGrid" class="grid-container"
                        style="display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 16px;">
                    </div>
                </div>


                <!-- Assigned Complaints Section -->
                <section id="assigned-complaints" class="section" data-section="assigned-complaints">
                    <div class="section-header">
                        <div>
                            <h3>Assigned Complaints</h3>
                            <p>Manage complaints that have been assigned to engineers</p>
                        </div>
                    </div>

                    <!-- Date Filter -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-filter"></i> Filter Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>From Date</label>
                                    <input type="date" id="assignedFromDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>To Date</label>
                                    <input type="date" id="assignedToDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Assigned Engineer</label>
                                    <select id="assignedEngineer" class="form-control">
                                        <option value="">All Engineers</option>
                                        <option value="engineer1">John Smith</option>
                                        <option value="engineer2">Sarah Johnson</option>
                                        <option value="engineer3">Mike Wilson</option>
                                        <option value="engineer4">Lisa Brown</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Service Type</label>
                                    <select id="pendingServiceType" class="form-control">
                                        <option value="installation">Installation</option>
                                        <option value="reinstallation">Reinstallation</option>
                                        <option value="demo">Demo</option>
                                        <option value="repair">Repair</option>
                                    </select>
                                </div>
                                <div class="form-group" style="display: flex; align-items: end;">
                                    <button class="btn btn-primary"  onclick="filterAssignedComplaints()">
                                        <i class="fas fa-search"></i> Apply Filter
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Complaints Table -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-user-check"></i> Assigned Complaints</h4>
                        </div>
                        <div class="card-content">
                            <!-- Loading Indicator -->
                            <div id="assignedLoadingIndicator"
                                style="display: none; text-align: center; padding: 20px;">
                                <i class="fas fa-spinner fa-spin" style="font-size: 24px; color: #2563eb;"></i>
                                <p style="margin-top: 10px; color: #64748b;">Loading assigned complaints...</p>
                            </div>

                            <div class="table-container" id="assignedComplaintsTableContainer">
                                <table class="jobs-table">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox"></th>
                                            <th>Complaint ID</th>
                                            <th>Customer</th>
                                            <th>Service Type</th>
                                            <th>Location</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="assignedComplaintsTable">
                                        <!-- Sample data for demonstration -->
                                        <tr>
                                            <td><input type="checkbox" class="complaint-checkbox"></td>
                                            <td class="job-id">RE170625000004</td>
                                            <td>Sarah Wilson<br><small>9876543213</small></td>
                                            <td><span class="badge badge-info">Repair</span></td>
                                            <td>John Smith</td>
                                            <td>17/06/2025</td>
                                            <td><span class="badge badge-info">Assigned</span></td>
                                            <td>
                                                <button class="action-btn"
                                                    onclick="viewComplaintDetail('RE170625000004')"
                                                    title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="action-btn"
                                                    onclick="updateAssignedStatus('RE170625000004')"
                                                    title="Update Status">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="action-btn" onclick="requestParts('RE170625000004')"
                                                    title="Request Parts">
                                                    <i class="fas fa-tools"></i>
                                                </button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Complete Complaints Section -->
                <section id="complete-complaints" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Complete Complaints</h3>
                            <p>View successfully resolved complaints</p>
                        </div>
                    </div>

                    <!-- Date Filter -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-filter"></i> Filter Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>From Date</label>
                                    <input type="date" id="completedFromDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>To Date</label>
                                    <input type="date" id="completedToDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Service Type</label>
                                    <select id="completedServiceType" class="form-control">
                                        <option value="installation">Installation</option>
                                        <option value="reinstallation">Reinstallation</option>
                                        <option value="demo">Demo</option>
                                        <option value="repair">Repair</option>
                                    </select>
                                </div>
                                <div class="form-group" style="display: flex; align-items: end;">
                                    <button class="btn btn-primary" onclick="filterCompletedComplaints()">
                                        <i class="fas fa-search"></i> Apply Filter
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Complaints Table -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-check-circle"></i> Completed Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table class="jobs-table">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox"></th>
                                            <th>Complaint ID</th>
                                            <th>Customer</th>
                                            <th>Service Type</th>
                                            <th>Location</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Updated At</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="completedComplaintsTable">

                                        <tr>
                                            <td><input type="checkbox" class="complaint-checkbox"></td>
                                            <td class="job-id">IN170625000005</td>
                                            <td>Robert Brown<br><small>9876543214</small></td>
                                            <td><span class="badge badge-success">Installation</span></td>
                                            <td>Hyderabad 500001</td>
                                            <td>17/06/2025</td>
                                            <td><span class="badge badge-success">Completed</span></td>
                                            <td>
                                                <button class="action-btn"
                                                    onclick="viewComplaintDetail('IN170625000005')"
                                                    title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="action-btn" onclick="downloadReport('IN170625000005')"
                                                    title="Download Report">
                                                    <i class="fas fa-download"></i>
                                                </button>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Cancelled Complaints Section -->
                <section id="cancelled-complaints" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Cancelled Complaints</h3>
                            <p>View cancelled complaints</p>
                        </div>
                    </div>

                    <!-- Date Filter -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-filter"></i> Filter Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>From Date</label>
                                    <input type="date" id="cancelledFromDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>To Date</label>
                                    <input type="date" id="cancelledToDate" class="form-control">
                                </div>
                                <div class="form-group">
                                    <label>Cancellation Reason</label>
                                    <select id="cancelledReason" class="form-control">
                                        <option value="installation">Installation</option>
                                        <option value="reinstallation">Reinstallation</option>
                                        <option value="demo">Demo</option>
                                        <option value="repair">Repair</option>
                                    </select>
                                </div>
                                <div class="form-group" style="display: flex; align-items: end;">
                                    <button class="btn btn-primary" onclick="filterCancelledComplaints()">
                                        <i class="fas fa-search"></i> Apply Filter
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Complaints Table -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-times-circle"></i> Cancelled Complaints</h4>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table class="jobs-table">
                                    <thead>
                                        <tr>
                                            <th><input type="checkbox"></th>
                                            <th>Complaint ID</th>
                                            <th>Customer</th>
                                            <th>Service Type</th>
                                            <th>Location</th>
                                            <th>Date</th>
                                            <th>Status</th>
                                            <th>Updated At</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="cancelledComplaintsTable">

                                        <tr>
                                            <td><input type="checkbox" class="complaint-checkbox"></td>
                                            <td class="job-id">IN170625000006</td>
                                            <td>Lisa Davis<br><small>9876543215</small></td>
                                            <td><span class="badge badge-danger">Installation</span></td>
                                            <td>Kolkata 700001</td>
                                            <td>17/06/2025</td>
                                            <td><span class="badge badge-secondary">Cancelled</span></td>
                                            <td>
                                                <button class="action-btn"
                                                    onclick="viewComplaintDetail('IN170625000006')"
                                                    title="View Details">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="action-btn"
                                                    onclick="reactivateComplaint('IN170625000006')" title="Reactivate">
                                                    <i class="fas fa-redo"></i>
                                                </button>
                                            </td>
                                        </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- NEW: Current Assignment Section (Engineer Dashboard) -->
                <div id="current-assignment" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Current Assignment</h3>
                            <p>Your currently assigned service job</p>
                        </div>
                        <div style="display: flex; gap: 12px;">
                            <button class="btn btn-outline" id="refreshAssignmentBtn">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                            <button class="btn btn-primary" id="markCompleteBtn">
                                <i class="fas fa-check"></i> Mark as Complete
                            </button>
                        </div>
                    </div>

                    <!-- Job Status Overview -->
                    <div class="stats-grid" style="grid-template-columns: repeat(4, 1fr); margin-bottom: 24px;">
                        <div class="stat-card">
                            <div class="stat-content">
                                <div class="stat-text">
                                    <p class="stat-label">Job Status</p>
                                    <p class="stat-value" style="font-size: 18px; color: #2563eb;">In Progress</p>
                                </div>
                                <div class="stat-icon blue">
                                    <i class="fas fa-clock"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-content">
                                <div class="stat-text">
                                    <p class="stat-label">Progress</p>
                                    <p class="stat-value" style="font-size: 18px; color: #f59e0b;">60%</p>
                                </div>
                                <div class="stat-icon orange">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-content">
                                <div class="stat-text">
                                    <p class="stat-label">Service Type</p>
                                    <p class="stat-value" style="font-size: 18px; color: #16a34a;">Installation</p>
                                </div>
                                <div class="stat-icon green">
                                    <i class="fas fa-tools"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-content">
                                <div class="stat-text">
                                    <p class="stat-label">Job ID</p>
                                    <p class="stat-value" style="font-size: 18px; color: #7c3aed;">#1001</p>
                                </div>
                                <div class="stat-icon" style="background-color: #f3e8ff; color: #7c3aed;">
                                    <i class="fas fa-hashtag"></i>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Job Details Card -->
                    <div class="card">
                        <div class="card-header">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <div>
                                    <h4>Job #1001 <span class="badge badge-primary">In Progress</span></h4>
                                </div>
                                <div style="display: flex; gap: 8px;">
                                    <button class="btn btn-outline" id="viewDetailsBtn">View Details</button>
                                    <button class="btn btn-primary" id="updateStatusBtn">Update Status</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-content">
                            <!-- Job Progress -->
                            <div class="job-progress-section">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <span style="font-weight: 500;">Job Progress</span>
                                    <span style="font-weight: 500; color: #2563eb;">60%</span>
                                </div>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 60%;"></div>
                                </div>
                            </div>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                                <!-- Customer Information -->
                                <div>
                                    <h5 style="margin-bottom: 12px; color: #1e293b;">CUSTOMER INFORMATION</h5>
                                    <div class="info-card">
                                        <p><strong>Rajesh Kumar</strong></p>
                                        <p><i class="fas fa-phone"></i> +91 98765 43210</p>
                                        <p><i class="fas fa-map-marker-alt"></i> 123, Sector 15, Gurgaon, Haryana -
                                            122001</p>
                                    </div>

                                    <h5 style="margin: 16px 0 12px; color: #1e293b;">PROBLEM DESCRIPTION</h5>
                                    <div class="info-card">
                                        <p>Customer reports that the VSAT connection is intermittent. Signal strength
                                            appears to be weak during peak hours. Need to check dish alignment and cable
                                            connections.</p>
                                    </div>
                                </div>

                                <!-- Job Details -->
                                <div>
                                    <h5 style="margin-bottom: 12px; color: #1e293b;">JOB DETAILS</h5>
                                    <div class="info-card">
                                        <p><strong>Service Type:</strong> Installation</p>
                                        <p><strong>Scheduled:</strong> 12/06/2025</p>
                                        <p><strong>Time Slot:</strong> 10:00 AM - 1:00 PM</p>
                                    </div>

                                    <h5 style="margin: 16px 0 12px; color: #1e293b;">PRODUCT INFORMATION</h5>
                                    <div class="info-card">
                                        <p><strong>Product:</strong> VSAT Terminal</p>
                                        <p><strong>Model:</strong> VS-2000X</p>
                                        <p><strong>Serial:</strong> VST1001ABC</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NEW: Update Status Section -->
                <div id="update-status" class="section">
                    <div class="section-header">
                        <h3>Update Job Status</h3>
                        <p>Update the status and progress of your assigned jobs</p>
                    </div>

                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                        <!-- Select Job Card -->
                        <div class="card">
                            <div class="card-header">
                                <h4>Select Job</h4>
                                <p>Choose a job to update its status</p>
                            </div>
                            <div class="card-content">
                                <div class="form-group">
                                    <label for="jobSelect">Select a job</label>
                                    <select id="jobSelect">
                                        <option value="">Select a job</option>
                                        <option value="1001">Job #1001 - Rajesh Kumar</option>
                                        <option value="1002">Job #1002 - Priya Sharma</option>
                                        <option value="1003">Job #1003 - Amit Singh</option>
                                    </select>
                                </div>

                                <!-- Job Details Display -->
                                <div id="selectedJobDetails" style="display: none; margin-top: 16px;">
                                    <div class="job-card">
                                        <div class="job-header">
                                            <h5>Job #1001</h5>
                                            <span class="badge badge-primary">In Progress</span>
                                        </div>
                                        <div class="job-info">
                                            <p><strong>Customer:</strong> Rajesh Kumar</p>
                                            <p><strong>Phone:</strong> +91 98765 43210</p>
                                            <p><strong>Location:</strong> 123, Sector 15, Gurgaon, Haryana - 122001</p>
                                            <p><strong>Scheduled:</strong> 12/06/2025</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Update Job Status Card -->
                        <div class="card">
                            <div class="card-header">
                                <h4>Update Job Status</h4>
                                <p>Provide details about the job progress and any issues encountered</p>
                            </div>
                            <div class="card-content">
                                <form id="updateJobStatusForm">
                                    <!-- Job Status -->
                                    <div class="form-section">
                                        <label class="section-label">Job Status</label>
                                        <div class="radio-group">
                                            <label class="radio-label">
                                                <input type="radio" name="jobStatus" value="Pending" />
                                                <span>Pending</span>
                                            </label>
                                            <label class="radio-label">
                                                <input type="radio" name="jobStatus" value="In Progress" checked />
                                                <span>In Progress</span>
                                            </label>
                                            <label class="radio-label">
                                                <input type="radio" name="jobStatus" value="On Hold" />
                                                <span>On Hold</span>
                                            </label>
                                            <label class="radio-label">
                                                <input type="radio" name="jobStatus" value="Completed" />
                                                <span>Completed</span>
                                            </label>
                                        </div>
                                    </div>

                                    <!-- Progress Details -->
                                    <div class="form-section">
                                        <label class="section-label">Progress Details</label>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="completionPercentage">Completion Percentage</label>
                                                <select id="completionPercentage">
                                                    <option value="">Select completion %</option>
                                                    <option value="10">10%</option>
                                                    <option value="25">25%</option>
                                                    <option value="50">50%</option>
                                                    <option value="75">75%</option>
                                                    <option value="100">100%</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="timeSpent">Time Spent (Hours)</label>
                                                <input type="number" id="timeSpent" placeholder="Enter hours" min="0"
                                                    step="0.5" />
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Work Completed -->
                                    <div class="form-group">
                                        <label for="workCompleted">Work Completed</label>
                                        <textarea id="workCompleted" rows="3"
                                            placeholder="Describe the work completed so far..."></textarea>
                                    </div>

                                    <!-- Issues Encountered -->
                                    <div class="form-group">
                                        <label for="issuesEncountered">Issues Encountered</label>
                                        <textarea id="issuesEncountered" rows="3"
                                            placeholder="Describe any issues or challenges faced..."></textarea>
                                    </div>

                                    <div class="form-actions">
                                        <button type="submit" class="btn btn-primary">
                                            <i class="fas fa-save"></i> Update Status
                                        </button>
                                        <button type="button" class="btn btn-outline">
                                            <i class="fas fa-times"></i> Cancel
                                        </button>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- NEW: Request Parts Section -->
                <div id="request-parts" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Request Parts</h3>
                            <p>Request new parts and track existing requests</p>
                        </div>
                        <button class="btn btn-primary" id="newRequestBtn">
                            <i class="fas fa-plus"></i> New Request
                        </button>
                    </div>

                    <!-- Parts Request Tabs -->
                    <div class="parts-tabs">
                        <button class="tab-btn active" data-tab="new-request">New Request</button>
                        <button class="tab-btn" data-tab="pending-requests">Pending Requests</button>
                        <button class="tab-btn" data-tab="request-history">Request History</button>
                    </div>

                    <!-- New Request Tab -->
                    <div id="new-request" class="tab-content active">
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 24px;">
                            <!-- Job Information -->
                            <div class="card">
                                <div class="card-header">
                                    <h4>Job Information</h4>
                                    <p>Select the job for which parts are needed</p>
                                </div>
                                <div class="card-content">
                                    <div class="form-group">
                                        <label for="partsJobSelect">Select Job</label>
                                        <select id="partsJobSelect">
                                            <option value="">Choose a job</option>
                                            <option value="1001">Job #1001 - Rajesh Kumar</option>
                                            <option value="1002">Job #1002 - Priya Sharma</option>
                                        </select>
                                    </div>

                                    <!-- Job Details Display -->
                                    <div id="partsJobDetails" style="display: none; margin-top: 16px;">
                                        <div class="job-card">
                                            <div class="job-header">
                                                <h5>Job #1001</h5>
                                                <span class="badge badge-primary">In Progress</span>
                                            </div>
                                            <div class="job-info">
                                                <p><strong>Customer:</strong> Rajesh Kumar</p>
                                                <p><strong>Service Type:</strong> Installation</p>
                                                <p><strong>Location:</strong> Gurgaon, Haryana</p>
                                                <p><strong>Product:</strong> VSAT Terminal VS-2000X</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Request Parts -->
                            <div class="card">
                                <div class="card-header">
                                    <div style="display: flex; justify-content: space-between; align-items: center;">
                                        <div>
                                            <h4>Request Parts</h4>
                                            <p>Add parts needed for the selected job</p>
                                        </div>
                                        <button class="btn btn-outline" id="addPartBtn">
                                            <i class="fas fa-plus"></i> Add Part
                                        </button>
                                    </div>
                                </div>
                                <div class="card-content">
                                    <!-- Required Parts Table -->
                                    <div class="form-section">
                                        <label class="section-label">Required Parts</label>
                                        <div class="parts-table-container">
                                            <table class="parts-table" id="partsTable">
                                                <thead>
                                                    <tr>
                                                        <th>Part Name</th>
                                                        <th>Part Number</th>
                                                        <th>Quantity</th>
                                                        <th>Priority</th>
                                                        <th>Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="partsTableBody">
                                                    <tr>
                                                        <td>LNB Cable</td>
                                                        <td>LNB-001</td>
                                                        <td>2</td>
                                                        <td><span class="badge badge-success">Normal</span></td>
                                                        <td>
                                                            <button class="action-btn" onclick="removePart(this)">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td>Satellite Dish</td>
                                                        <td>DISH-75CM</td>
                                                        <td>1</td>
                                                        <td><span class="badge badge-danger">High</span></td>
                                                        <td>
                                                            <button class="action-btn" onclick="removePart(this)">
                                                                <i class="fas fa-trash"></i>
                                                            </button>
                                                        </td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>

                                    <!-- Request Details -->
                                    <div class="form-section">
                                        <label class="section-label">Request Details</label>
                                        <div class="form-row">
                                            <div class="form-group">
                                                <label for="requestUrgency">Request Urgency</label>
                                                <select id="requestUrgency">
                                                    <option value="">Select urgency</option>
                                                    <option value="Low">Low</option>
                                                    <option value="Normal">Normal</option>
                                                    <option value="High">High</option>
                                                    <option value="Urgent">Urgent</option>
                                                </select>
                                            </div>
                                            <div class="form-group">
                                                <label for="deliveryLocation">Delivery Location</label>
                                                <select id="deliveryLocation">
                                                    <option value="">Select location</option>
                                                    <option value="Job Site">Job Site</option>
                                                    <option value="Service Center">Service Center</option>
                                                    <option value="Engineer Location">Engineer Location</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Reason for Request -->
                                    <div class="form-group">
                                        <label for="requestReason">Reason for Request</label>
                                        <textarea id="requestReason" rows="3"
                                            placeholder="Explain why these parts are needed..."></textarea>
                                    </div>

                                    <div class="form-actions">
                                        <button type="button" class="btn btn-primary" id="submitPartsRequestBtn">
                                            <i class="fas fa-paper-plane"></i> Submit Request
                                        </button>
                                        <button type="button" class="btn btn-outline">
                                            <i class="fas fa-times"></i> Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Pending Requests Tab -->
                    <div id="pending-requests" class="tab-content">
                        <div class="card">
                            <div class="card-header">
                                <h4>Pending Parts Requests</h4>
                                <p>Track the status of your pending parts requests</p>
                            </div>
                            <div class="card-content">
                                <p style="text-align: center; color: #64748b; padding: 40px;">
                                    <i class="fas fa-clock"
                                        style="font-size: 48px; margin-bottom: 16px; display: block;"></i>
                                    No pending parts requests found.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Request History Tab -->
                    <div id="request-history" class="tab-content">
                        <div class="card">
                            <div class="card-header">
                                <h4>Parts Request History</h4>
                                <p>View all your previous parts requests</p>
                            </div>
                            <div class="card-content">
                                <p style="text-align: center; color: #64748b; padding: 40px;">
                                    <i class="fas fa-history"
                                        style="font-size: 48px; margin-bottom: 16px; display: block;"></i>
                                    No request history available.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Delivery Challan Section -->
                <div id="delivery-challan" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Delivery Challan</h3>
                            <p>Generate delivery challan for service jobs</p>
                        </div>
                    </div>

                    <div class="form-card">
                        <div class="card-header">
                            <h4><i class="fas fa-file-invoice"></i> Generate Delivery Challan</h4>
                            <p>Create a delivery document with job details, engineer assignment, and goods information
                            </p>
                        </div>
                        <div class="card-content">
                            <form id="deliveryChallanForm">
                                <div class="form-row">
                                    <div class="form-group">
                                        <h5 style="margin-bottom: 16px; color: #374151;">Job Information</h5>
                                        <label for="challanComplaintNumber">Complaint Number*</label>
                                        <input type="text" id="challanComplaintNumber" name="complaintNumber"
                                            placeholder="Enter complaint number" required>
                                        <div class="error-message" id="challanComplaintNumberError"></div>
                                    </div>
                                    <div class="form-group">
                                        <h5 style="margin-bottom: 16px; color: #374151;">Charges & Goods</h5>
                                        <label for="serviceCharges">Service Charges*</label>
                                        <input type="number" id="serviceCharges" name="serviceCharges"
                                            placeholder="Enter service charges" min="0" step="0.01" required>
                                        <div class="error-message" id="serviceChargesError"></div>
                                    </div>
                                </div>

                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="assignedEngineer">Assigned Engineer*</label>
                                        <select id="assignedEngineer" name="assignedEngineer" required>
                                            <option value="">-- Select Engineer --</option>
                                            <option value="Amit Kumar">Amit Kumar</option>
                                            <option value="Rajesh Singh">Rajesh Singh</option>
                                            <option value="Priya Sharma">Priya Sharma</option>
                                            <option value="Vikash Gupta">Vikash Gupta</option>
                                        </select>
                                        <div class="error-message" id="assignedEngineerError"></div>
                                    </div>
                                    <div class="form-group">
                                        <label for="quantityRequired">Quantity Required*</label>
                                        <input type="number" id="quantityRequired" name="quantityRequired"
                                            placeholder="Enter quantity" min="1" required>
                                        <div class="error-message" id="quantityRequiredError"></div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="goodsDescription">Description of Goods*</label>
                                    <textarea id="goodsDescription" name="goodsDescription" rows="4"
                                        placeholder="Describe the goods/parts required to solve the problem..."
                                        required></textarea>
                                    <div class="error-message" id="goodsDescriptionError"></div>
                                </div>

                                <div class="form-actions">
                                    <button type="submit" class="btn btn-primary">
                                        <i class="fas fa-download"></i> Generate Challan Document
                                    </button>
                                    <button type="button" class="btn btn-outline" id="saveChallanDraftBtn">
                                        <i class="fas fa-save"></i> Save as Draft
                                    </button>
                                    <button type="button" class="btn btn-outline" id="resetChallanBtn">
                                        <i class="fas fa-undo"></i> Reset
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>

                    <!-- Recent Challans -->
                    <div class="card">
                        <div class="card-header">
                            <h4><i class="fas fa-history"></i> Recent Delivery Challans</h4>
                            <p>View recently generated delivery challans</p>
                        </div>
                        <div class="card-content">
                            <div class="table-container">
                                <table class="jobs-table">
                                    <thead>
                                        <tr>
                                            <th>Challan ID</th>
                                            <th>Complaint Number</th>
                                            <th>Engineer</th>
                                            <th>Service Charges</th>
                                            <th>Quantity</th>
                                            <th>Status</th>
                                            <th>Date</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td><span class="job-id">#CH001</span></td>
                                            <td><span class="job-id">#CMP12345</span></td>
                                            <td>Amit Kumar</td>
                                            <td>₹1,500</td>
                                            <td>2</td>
                                            <td><span class="badge badge-success">Generated</span></td>
                                            <td>
                                                <div class="date-cell">
                                                    <i class="fas fa-calendar"></i>
                                                    2024-01-15
                                                </div>
                                            </td>
                                            <td>
                                                <div class="action-buttons">
                                                    <button class="action-btn">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button class="action-btn">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                </div>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Complaint Report Download Section -->
                <div id="complaint-report-overview" class="section">
                    <div class="section-header">
                        <div>
                            <h3>Complaint Reports</h3>
                            <p>Download complaints as CSV for today or all records</p>
                        </div>
                    </div>

                    <div class="form-card">
                        <div class="card-header">
                            <h4><i class="fas fa-file-csv"></i> Download Complaint Report</h4>
                            <p>Select a filter and download complaint records in CSV format</p>
                        </div>
                        <div class="card-content">
                            <div class="form-actions" style="display: flex; gap: 1rem; flex-wrap: wrap;">
                                <button class="btn btn-primary" onclick="downloadComplaints('today', event)">
                                    <i class="fas fa-calendar-day"></i> Download Today's Complaints
                                </button>
                                <button class="btn btn-outline" onclick="downloadComplaints('all', event)">
                                    <i class="fas fa-database"></i> Download All Complaints
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Complaint Report Filter Section -->
                <div id="complaint-report-filter" class="section">
                    <div class="page-header">
                        <h1 class="page-title">All Reports</h1>
                    </div>
                    
                    <div class="filter-section">
                        <form id="complaintReportFilterForm" class="filter-form">
                            <!-- Date Range Section -->
                            <div class="date-range-container">
                                <div class="date-input-group">
                                    <label for="reportFromDate" class="date-label">
                                        <i class="fas fa-calendar-alt"></i>
                                    </label>
                                    <input type="date" id="reportFromDate" class="date-input" placeholder="01/01/2025" required>
                                </div>
                                <div class="date-input-group">
                                    <label for="reportToDate" class="date-label">
                                        <i class="fas fa-calendar-alt"></i>
                                    </label>
                                    <input type="date" id="reportToDate" class="date-input" placeholder="01/01/2025" required>
                                </div>
                                <div id="reportFromDateError" class="error-message"></div>
                                <div id="reportToDateError" class="error-message"></div>
                            </div>

                            <!-- Report Selection Section -->
                            <div class="report-selection-container">
                                <div class="form-group">
                                    <label for="reportNameSelect" class="form-label">Select Report Name:</label>
                                    <select id="reportNameSelect" class="form-select" required>
                                        <option value="">--- Select ---</option>
                                        <option value="pending">Pending</option>
                                        <option value="ok">OK</option>
                                        <option value="registered">Registered</option>
                                        <option value="cancelled">Cancelled</option>
                                    </select>
                                    <div id="reportNameSelectError" class="error-message"></div>
                                </div>
                                
                                <button type="submit" id="downloadFilteredReportBtn" class="download-btn">
                                    <i class="fas fa-download"></i> Download Report
                                </button>
                            </div>
                        </form>
                    </div>
                </div>


                <!-- Settings Sections (Placeholder) -->
                <div id="preferences" class="section">
                    <div class="section-header">
                        <h3>Preferences</h3>
                        <p>Manage your application preferences and settings</p>
                    </div>
                    <div class="card">
                        <div class="card-content">
                            <p style="text-align: center; color: #64748b; padding: 40px;">
                                <i class="fas fa-cog" style="font-size: 48px; margin-bottom: 16px; display: block;"></i>
                                Preferences settings will be implemented here.
                            </p>
                        </div>
                    </div>
                </div>

                <!-- User Management Section -->
                <div id="user-management" class="section">
                    <div class="section-header">
                        <h3>User Management</h3>
                        <p>Manage user accounts and permissions</p>
                    </div>

                    <!-- Centering wrapper -->
                    <div class="form-center-wrapper">
                        <div class="card">
                            <div class="card-header" style="text-align: center;">
                                <h4 style="margin: 0;">Change Password</h4>
                            </div>

                            <div class="card-content">
                                <form id="passwordChangeForm" onsubmit="return false;">
                                    <div class="form-group">
                                        <label for="username">Username</label>
                                        <input type="text" id="username" class="form-input" required />
                                    </div>

                                    <div class="form-group password-group">
                                        <label for="oldPassword">Old Password</label>
                                        <input type="password" id="oldPassword" class="form-input" required />
                                        <span class="toggle-icon" onclick="togglePassword('oldPassword', this)">
                                            <i class="fas fa-eye"></i>
                                        </span>
                                    </div>

                                    <div class="form-group password-group">
                                        <label for="newPassword">New Password</label>
                                        <input type="password" id="newPassword" class="form-input" required />
                                        <span class="toggle-icon" onclick="togglePassword('newPassword', this)">
                                            <i class="fas fa-eye"></i>
                                        </span>
                                        <small id="passwordSameError" class="error-message">❌ New password must be
                                            different from old password.</small>

                                    </div>

                                    <div class="form-group password-group">
                                        <label for="confirmPassword">Confirm New Password</label>
                                        <input type="password" id="confirmPassword" class="form-input" required />
                                        <span class="toggle-icon" onclick="togglePassword('confirmPassword', this)">
                                            <i class="fas fa-eye"></i>
                                        </span>
                                        <small id="passwordError" class="error-message">❌ Passwords do not
                                            match.</small>
                                        <small id="passwordSuccess" class="success-message">✅ Passwords match.</small>
                                    </div>

                                    <button type="submit" class="submit-button" onclick="submitPasswordChange()">Change
                                        Password</button>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>


            </main>
        </div>
    </div>
    <!-- Modern Confirmation Modal -->
    <!-- Engineer Details Modal -->
    <div class="modal-overlay" id="engineerDetailsModal" style="display: none;">
        <div class="modal-content" style="max-width: 800px; width: 90%;">
            <div class="modal-header">
                <h3>Engineer Details</h3>
                <button class="modal-close" onclick="closeEngineerDetailsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="engineer-detail-grid"
                    style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 16px; margin-bottom: 20px;">
                    <!-- Basic Info -->
                    <div class="detail-card">
                        <h4>Engineer ID</h4>
                        <p id="detailEngineerId">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>Full Name</h4>
                        <p id="detailEngineerName">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>Email Address</h4>
                        <p id="detailEngineerEmail">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>Contact Number</h4>
                        <p id="detailEngineerContact">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>Qualification</h4>
                        <p id="detailEngineerQualification">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>Product Specialization</h4>
                        <p id="detailEngineerProduct">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>Operating Pincode</h4>
                        <p id="detailEngineerPincode">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>PAN Number</h4>
                        <p id="detailPanNumber">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>Aadhar Number</h4>
                        <p id="detailAadharNumber">N/A</p>
                    </div>

                    <div class="detail-card">
                        <h4>Driving License Number</h4>
                        <p id="detailDrivingLicenseNumber">N/A</p>
                    </div>
                    <div class="detail-card">
                        <h4>Registration Date</h4>
                        <p id="detailEngineerRegDate">N/A</p>
                    </div>
                </div>

                <!-- Documents Section -->
                <div class="documents-section" style="margin-top: 20px;">
                    <h4 style="margin-bottom: 16px; color: #374151;">Documents</h4>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 16px;">
                        <div class="document-card"
                            style="padding: 16px; border: 1px solid #e5e7eb; border-radius: 8px;">
                            <h5>PAN Card</h5>
                            <p id="detailPanCard" class="doc-status">Not uploaded</p>
                            <button id="viewPanCardBtn" class="btn btn-outline btn-sm"
                                onclick="viewDocument('pan_card')" style="display: none; margin-top: 8px;">
                                <i class="fas fa-eye"></i> View
                            </button>
                        </div>
                        <div class="document-card"
                            style="padding: 16px; border: 1px solid #e5e7eb; border-radius: 8px;">
                            <h5>Aadhar Card</h5>
                            <p id="detailAadharCard" class="doc-status">Not uploaded</p>
                            <button id="viewAadharCardBtn" class="btn btn-outline btn-sm"
                                onclick="viewDocument('aadhar_card')" style="display: none; margin-top: 8px;">
                                <i class="fas fa-eye"></i> View
                            </button>
                        </div>
                        <div class="document-card"
                            style="padding: 16px; border: 1px solid #e5e7eb; border-radius: 8px;">
                            <h5>Driving License</h5>
                            <p id="detailDrivingLicense" class="doc-status">Not uploaded</p>
                            <button id="viewDrivingLicenseBtn" class="btn btn-outline btn-sm"
                                onclick="viewDocument('driving_licence')" style="display: none; margin-top: 8px;">
                                <i class="fas fa-eye"></i> View
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline" onclick="closeEngineerDetailsModal()">Close</button>
                <!-- <button class="btn btn-primary" onclick="editEngineerModal()">
                    <i class="fas fa-edit"></i> Edit Engineer
                </button> -->
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modern-modal">
        <div class="modern-modal-content">
            <div class="modal-icon warning">
                <i class="fas fa-exclamation-circle"></i>
            </div>
            <h2>Unsaved Changes</h2>
            <p>You've made changes that haven't been saved. Are you sure you want to refresh?</p>
            <div class="modal-actions">
                <button id="confirmYes" class="btn btn-danger">Yes, Refresh</button>
                <button id="confirmNo" class="btn btn-neutral">No, Keep Editing</button>
            </div>
        </div>
    </div>


    <!-- Popup Modal for Assign Engineer -->
    <!-- <div id="assignPopup" class="popup-overlay" style="display: none;">
        <div class="popup-content">
            <h3>Assign Engineer</h3>
            <label for="engineerName1">Engineer Name:</label>
            <input type="text" id="engineerName1" placeholder="Enter engineer name" />

            <label for="engineerPhone">Engineer Phone Number:</label>
            <input type="text" id="engineerPhone" placeholder="Enter phone number" />

            <div class="popup-buttons">
                <button onclick="assignEngineer()">Assign</button>
                <button onclick="closeAssignPopup()">Cancel</button>
            </div>
        </div>
    </div> -->

    <!-- Popup Modal for Assign Engineer -->
    <!-- <div id="assignPopup" class="popup-overlay" style="
    display: none; 
    position: fixed; 
    top: 0; left: 0; 
    width: 100%; 
    height: 100%; 
    background-color: rgba(0, 0, 0, 0.5); 
    display: none; 
    justify-content: center; 
    align-items: center; 
    z-index: 1000;
">

        <div class="popup-content" style="
        background: #fff; 
        padding: 24px; 
        border-radius: 12px; 
        width: 480px; 
        max-width: 90%; 
        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        font-family: 'Segoe UI', sans-serif;
    ">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin: 0; font-size: 20px; font-weight: 600;">Assign Engineer</h3>
                <button onclick="closeAssignPopup()" style="
                background: none;
                border: none;
                font-size: 20px;
                color: #888;
                cursor: pointer;
            " title="Close">
                    &times;
                </button>
            </div>

            <div style="margin-bottom: 16px;">
                <label for="engineerName1" style="display: block; margin-bottom: 6px; font-weight: 500;">Engineer
                    Name:</label>
                <input type="text" id="engineerName1" placeholder="Enter engineer name" style="
                width: 100%; 
                padding: 10px; 
                border: 1px solid #ccc; 
                border-radius: 8px;
                font-size: 14px;
            " />
            </div>

            < <div style="margin-bottom: 20px;">
                <label for="engineerPhone" style="display: block; margin-bottom: 6px; font-weight: 500;">Engineer Phone
                    Number:</label>
                <input type="text" id="engineerPhone" placeholder="Enter phone number" style="
                width: 100%; 
                padding: 10px; 
                border: 1px solid #ccc; 
                border-radius: 8px;
                font-size: 14px;
            " /> -->
    <!-- </div> -->

    <!-- <div class="popup-buttons" style="display: flex; justify-content: flex-end; gap: 10px;">
                <button onclick="assignEngineer()" style="
                padding: 8px 16px;
                background-color: #2563eb;
                color: white;
                border: none;
                border-radius: 6px;
                font-weight: 500;
                cursor: pointer;
            ">Assign</button>
                <button onclick="closeAssignPopup()" style="
                padding: 8px 16px;
                background-color: #e5e7eb;
                color: black;
                border: none;
                border-radius: 6px;
                cursor: pointer;
            ">Cancel</button>
            </div>
        </div>
    </div> -->
    <!-- //assign engineer model -->
    <!-- Popup Modal for Assign Engineer -->
    <div id="assignPopup" class="popup-overlay" style="
    display: none; 
    position: fixed; 
    top: 0; left: 0; 
    width: 100%; 
    height: 100%; 
    background-color: rgba(0, 0, 0, 0.5); 
    justify-content: center; 
    align-items: center; 
    z-index: 1000;
">

        <div class="popup-content" style="
        background: #fff; 
        padding: 24px; 
        border-radius: 12px; 
        width: 480px; 
        max-width: 90%; 
        box-shadow: 0 8px 24px rgba(0,0,0,0.2);
        font-family: 'Segoe UI', sans-serif;
    ">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                <h3 style="margin: 0; font-size: 20px; font-weight: 600;">Assign Engineer</h3>
                <button onclick="closeAssignPopup()" style="
                background: none;
                border: none;
                font-size: 20px;
                color: #888;
                cursor: pointer;
            " title="Close">
                    &times;
                </button>
            </div>

            <div style="margin-bottom: 20px;">
                <label for="engineerName1" style="display: block; margin-bottom: 6px; font-weight: 500;">Engineer
                    Name:</label>
                <select id="engineerName1" style="
                width: 100%; 
                padding: 10px; 
                border: 1px solid #ccc; 
                border-radius: 8px;
                font-size: 14px;
            ">
                    <option value="">Select Engineer</option>
                </select>
            </div>

            <div class="popup-buttons" style="display: flex; justify-content: flex-end; gap: 10px;">
                <button onclick="assignEngineer()" style="
                padding: 8px 16px;
                background-color: #2563eb;
                color: white;
                border: none;
                border-radius: 6px;
                font-weight: 500;
                cursor: pointer;
            ">Assign</button>
                <button onclick="closeAssignPopup()" style="
                padding: 8px 16px;
                background-color: #e5e7eb;
                color: black;
                border: none;
                border-radius: 6px;
                cursor: pointer;
            ">Cancel</button>
            </div>
        </div>
    </div>




    <!-- View Complaint Details Modal -->
    <div id="viewComplaintModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Complaint Details</h2>
                <button class="modal-close" onclick="closeViewModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="complaint-details-grid">
                    <!-- Basic Info -->
                    <div class="detail-section">
                        <h3>Basic Information</h3>
                        <div class="detail-row">
                            <label>Complaint ID:</label>
                            <span id="viewComplaintId">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Reported on:</label>
                            <span id="viewReportedOn">-</span>
                        </div>
                    </div>

                    <!-- Product Details -->
                    <div class="detail-section">
                        <h3>Product Information</h3>
                        <div class="detail-row">
                            <label>Product:</label>
                            <span id="viewProduct">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Product type:</label>
                            <span id="viewProductType">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Date of purchase:</label>
                            <span id="viewDateOfPurchase">-</span>
                        </div>
                    </div>

                    <!-- Complaint Details -->
                    <div class="detail-section">
                        <h3>Complaint Information</h3>
                        <div class="detail-row">
                            <label>Complaint type:</label>
                            <span id="viewComplaintType">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Issue type:</label>
                            <span id="viewIssueType">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Assigned to:</label>
                            <span id="viewAssignedTo">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Status:</label>
                            <span id="viewStatus">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Service Center:</label>
                            <span id="viewServiceCenter">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Assigned engineer:</label>
                            <span id="viewAssignedEngineer">-</span>
                        </div>
                    </div>

                    <!-- Customer Details -->
                    <div class="detail-section">
                        <h3>Customer Information</h3>
                        <div class="detail-row">
                            <label>Customer name:</label>
                            <span id="viewCustomerName">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Address:</label>
                            <span id="viewAddress">-</span>
                        </div>
                        <div class="detail-row">
                            <label>Mobile:</label>
                            <span id="viewMobile">-</span>
                        </div>
                    </div>

                    <!-- Photo Proofs -->
                    <div class="detail-section full-width">
                        <h3>Photo Proofs</h3>
                        <div class="photo-proofs">
                            <div class="photo-proof-item">
                                <label>Photo proof of installed RF Module</label>
                                <div class="photo-placeholder">No photo uploaded</div>
                            </div>
                            <div class="photo-proof-item">
                                <label>Photo proof of door thickness</label>
                                <div class="photo-placeholder">No photo uploaded</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Complaint Modal -->
    <div id="editComplaintModal" class="modal">
        <div class="modal-content large">
            <div class="modal-header">
                <h2>Complaint Update</h2>
                <button class="modal-close" onclick="closeEditModal()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="editComplaintForm">
                    <div class="edit-form-grid">
                        <!-- Complaint ID (Read-only) -->
                        <div class="form-group">
                            <label for="editComplaintIdField">Complaint ID</label>
                            <input type="text" id="editComplaintIdField" readonly>
                        </div>
                        <div class="form-group">
                            <label for="editRequestTypeField">Request Type</label>
                            <input type="text" id="editRequestTypeField" readonly>
                        </div>

                        <!-- Booking Details -->
                        <div class="form-group">
                            <label for="editBookingDate">Booking date*</label>
                            <input type="date" id="editBookingDate">
                        </div>

                        <div class="form-group">
                            <label for="editBookingSlot">Booking slot*</label>
                            <select id="editBookingSlot">
                                <option value="">Select slot</option>
                                <option value="9AM-12PM">9AM-12PM</option>
                                <option value="12PM-3PM">12PM-3PM</option>
                                <option value="3PM-6PM">3PM-6PM</option>
                                <option value="6PM-9PM">6PM-9PM</option>
                            </select>
                        </div>

                        <!-- Delivery Details -->
                        <div class="form-group">
                            <label for="editEstimatedDelivery">Estimated product delivery date*</label>
                            <input type="date" id="editEstimatedDelivery">
                        </div>

                        <div class="form-group">
                            <label for="editActualDelivery">Actual product delivered date</label>
                            <input type="date" id="editActualDelivery">
                        </div>

                        <!-- Job Details -->
                        <div class="form-group">
                            <label for="editPreJobConnect">Pre job connect with Cx</label>
                            <select id="editPreJobConnect">
                                <option value="">Select option</option>
                                <option value="--NA--">--NA--</option>
                                <option value="1 Unproductive visit">1 Unproductive visit</option>
                                <option value="2 Unproductive visits">2 Unproductive visits</option>
                                <option value="3 Unproductive visits">3 Unproductive visits</option>
                                <option value="More than 3 Unproductive visits">More than 3 Unproductive visits</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="editFinalAlignmentDate">Final date of alignment with Cx</label>
                            <input type="date" id="editFinalAlignmentDate">
                        </div>

                        <div class="form-group">
                            <label for="editFinalAlignmentTime">Final time of alignment with Cx</label>
                            <input type="time" id="editFinalAlignmentTime">
                        </div>

                        <!-- Visit and Partner Details -->
                        <div class="form-group">
                            <label for="editUnproductiveVisit">Unproductive visit if any</label>
                            <select id="editUnproductiveVisit">
                                <option value="">Select option</option>
                                <option value="--NA--">--NA--</option>
                                <option value="1 Unproductive visit">1 Unproductive visit</option>
                                <option value="2 Unproductive visits">2 Unproductive visits</option>
                                <option value="3 Unproductive visits">3 Unproductive visits</option>
                                <option value="More than 3 Unproductive visits">More than 3 Unproductive visits</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="editPartnerName">Partner name</label>
                            <input type="text" id="editPartnerName">
                        </div>

                        <!-- Status Details -->
                        <div class="form-group">
                            <label for="editJobEndDate">Job end date</label>
                            <input type="date" id="editJobEndDate">
                        </div>

                        <div class="form-group">
                            <label for="editOgmStatus">OGM Status</label>
                            <select id="editOgmStatus">
                                <option value="">Select status</option>
                                <option value="OGM not done">OGM not done</option>
                                <option value="OGM done by UC+VSAT">OGM done by UC+VSAT</option>
                                <option value="OGM done by VSAT">OGM done by VSAT</option>
                                <option value="3 Unproductive visits">3 Unproductive visits</option>
                                <option value="More then 3 Unproductive visits">More then 3 Unproductive visits</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="editJobStatus">Job status</label>
                            <select id="editJobStatus">
                                <option value="">Select status</option>
                                <option value="Assigned">Assigned</option>
                                <option value="Pending">Pending</option>
                                <option value="Completed">Completed</option>
                                <option value="Cancelled">Cancelled</option>
                            </select>
                        </div>

                        <!-- Reschedule Details -->
                        <div class="form-group">
                            <label for="editRescheduleDate">Reschedule date</label>
                            <input type="date" id="editRescheduleDate">
                        </div>

                        <div class="form-group">
                            <label for="editRescheduleReason">Reason for rescheduling</label>
                            <select id="editRescheduleReason">
                                <option value="">Select reason</option>
                                <option value="--NA--">--NA--</option>
                                <option value="Customer Request">Customer Request</option>
                                <option value="Technical Issues">Technical Issues</option>
                                <option value="Weather Conditions">Weather Conditions</option>
                                <option value="Engineer Unavailable">Engineer Unavailable</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="editRescheduleRemark">Remark for rescheduling</label>
                            <textarea id="editRescheduleRemark" placeholder="Comments here"></textarea>
                        </div>

                        <!-- Cancellation Details -->
                        <div class="form-group">
                            <label for="editCancelReason">Reason for cancelled</label>
                            <select id="editCancelReason">
                                <option value="">Select reason</option>
                                <option value="--NA--">--NA--</option>
                                <option value="Return">Return</option>
                                <option value="Replacement">Replacement</option>
                                <option value="Cancelled before product delivery">Cancelled before product delivery
                                </option>
                                <option value="Return: Cx want installation on different address">Return: Cx want
                                    installation on different address</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="editCancelRemark">Remark for cancelled</label>
                            <textarea id="editCancelRemark" placeholder="Comments here"></textarea>
                        </div>

                        <!-- Technical Details -->
                        <div class="form-group">
                            <label for="editRfInstallationStatus">RF module installation status</label>
                            <select id="editRfInstallationStatus">
                                <option value="">Select status</option>
                                <option value="Installed">Installed</option>
                                <option value="Not installed">Not installed</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="editRfNotInstalledReason">Reason for RF not installed</label>
                            <textarea id="editRfNotInstalledReason" placeholder="Comments here"></textarea>
                        </div>

                        <!-- Configuration and Connectivity -->
                        <div class="form-group">
                            <label>Configuration done</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="configurationDone" value="No">
                                    <span class="radio-custom"></span>
                                    No
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="configurationDone" value="Yes">
                                    <span class="radio-custom"></span>
                                    Yes
                                </label>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>Wifi connected</label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="wifiConnected" value="No">
                                    <span class="radio-custom"></span>
                                    No
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="wifiConnected" value="Yes">
                                    <span class="radio-custom"></span>
                                    Yes
                                </label>
                            </div>
                        </div>

                        <!-- Remarks and Ratings -->
                        <div class="form-group full-width">
                            <label for="editSmeRemark">SME remark</label>
                            <textarea id="editSmeRemark" placeholder="Comments here"></textarea>
                        </div>

                        <div class="form-group full-width">
                            <label for="editExtraMileRemark">Remark for extra mile</label>
                            <textarea id="editExtraMileRemark" placeholder="Comments here"></textarea>
                        </div>

                        <div class="form-group">
                            <label for="editAzRating">AZ rating</label>
                            <select id="editAzRating">
                                <option value="">Select rating</option>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label for="editOtherRemark">Other remark if any</label>
                            <textarea id="editOtherRemark" placeholder="Comments here"></textarea>
                        </div>

                        <!-- File Uploads -->
                        <div class="form-group">
                            <label for="editRfModulePhoto">Photo proof of installed RF Module</label>
                            <input type="file" id="editRfModulePhoto" accept="image/*">
                        </div>

                        <div class="form-group">
                            <label for="editDoorThicknessPhoto">Photo proof of door thickness</label>
                            <input type="file" id="editDoorThicknessPhoto" accept="image/*">
                        </div>
                    </div>

                    <div class="modal-actions">
                        <button type="button" class="btn btn-primary" onclick="updateComplaint()">
                            Update complaint
                        </button>
                        <button type="button" class="btn btn-outline" onclick="closeEditModal()">
                            Cancel
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
<div id="serviceCenterModal" class="custom-modal">
  <div class="custom-modal-content">
    <div class="custom-modal-header">
      <h2>Service Center Details</h2>
      <button class="custom-modal-close" onclick="closeServiceCenterModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    <div class="custom-modal-body">
      <div class="details-grid">

        <!-- Basic Info -->
        <div class="detail-section">
          <h3>Basic Information</h3>
          <div class="detail-row"><label>Center ID:</label><span id="scCenterId">-</span></div>
          <div class="detail-row"><label>Partner Name:</label><span id="scPartnerName">-</span></div>
          <div class="detail-row"><label>Contact Person:</label><span id="scContactPerson">-</span></div>
        </div>

        <!-- Contact -->
        <div class="detail-section">
          <h3>Contact</h3>
          <div class="detail-row"><label>Email:</label><span id="scEmail">-</span></div>
          <div class="detail-row"><label>Phone:</label><span id="scPhone">-</span></div>
        </div>

        <!-- Pincodes -->
        <div class="detail-section">
          <h3>Service Area</h3>
          <div class="detail-row"><label>Operating Pincodes:</label><span id="scOperatingPincodes">-</span></div>
        </div>

        <!-- Identity Information -->
        <div class="detail-section">
          <h3>Identity Information</h3>
          <div class="detail-row"><label>GST Number:</label><span id="scGstNumber">-</span></div>
          <div class="detail-row"><label>PAN Number:</label><span id="scPanNumber">-</span></div>
          <div class="detail-row"><label>Aadhaar Number:</label><span id="scAadharNumber">-</span></div>
        </div>

        <!-- Status -->
        <div class="detail-section">
          <h3>Status</h3>
          <div class="detail-row"><label>Status:</label><span id="scStatus">-</span></div>
        </div>

      </div>
    </div>
  </div>
</div>




    <!-- Mobile Navigation Toggle -->
    <script src="../js/Config.js"></script>
    <script src="../js/call_registration.js"></script>
    <script src="../js/service_center.js"></script>
    <script src="../js/complaint.js"></script>
    <script src="../js/manage_engineer.js"></script>
    <script src="../js/dashboard.js"></script>
    <script src="../js/complaint_report.js"></script>

</body>

</html>